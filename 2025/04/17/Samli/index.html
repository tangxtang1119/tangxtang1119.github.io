<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="‘有志少女 先读书’" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Samli |  tangxtang</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Samli"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Samli
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/04/17/Samli/" class="article-date">
  <time datetime="2025-04-16T16:00:00.000Z" itemprop="datePublished">2025-04-17</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">25.2k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">115 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p>参考：</p>
<p><a href="Smali%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/u012573920/article/details/44034397)">Smali和逆向分析</a></p>
<p>[Smali 语法解析](Smali 语法解析——Hello World通过上一篇文章的学习，我们都知道了 Java 代码是如何执行的。Java - 掘金](<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903732774174734">https://juejin.cn/post/6844903732774174734</a>))</p>
<p><a href="%5BSmali--Dalvik%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%8C%87%E4%BB%A4%E8%AF%AD%E8%A8%80--%3E%E3%80%90android_smali%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B8%80%E3%80%91_smali;-%3E-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/wdaming1986/article/details/8299996)">Smali–Dalvik虚拟机指令语言</a></p>
<p>学习视频：</p>
<p><a href="%E3%80%90smali%E8%AF%AD%E8%A8%80%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91https://www.bilibili.com/video/BV1Vf4y1q7gh?vd_source=cbd0e7aa3299fa0fcc330c5ee16869bc">Smali语言从入门到精通</a></p>
<p>利器：</p>
<p><a target="_blank" rel="noopener" href="http://liuzhichao.com/p/1476.html">Smali Sublime Text语法高亮插件</a></p>
<p><a target="_blank" rel="noopener" href="https://code.google.com/p/dex2jar/">dex2jar，配合Smali事半功倍</a></p>
<h1 id="应用相关"><a href="#应用相关" class="headerlink" title="应用相关"></a>应用相关</h1><ol>
<li><p>.method和.end method</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类似于Java中的大括号，包含了方法的实现代码段。</span><br></pre></td></tr></table></figure>
</li>
<li><p>.locals</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">指明了这个方法用到的寄存器数量，当然寄存器可以重复利用，从“V0”起算</span><br><span class="line">使用这个指定表明方法中非参寄存器的总数，放在方法的第一行。</span><br></pre></td></tr></table></figure>
</li>
<li><p>.registers</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用这个指令指定方法中寄存器的总数</span><br></pre></td></tr></table></figure>
</li>
<li><p>v、p0、p1</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void int foo(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">  return (a+b)*(a-b);</span><br><span class="line">&#125;</span><br><span class="line">v命名法采用以小写字母v开头的方式表示函数中用到的局部变量与参数，所有的寄存器命名从v0开始，v0,v1用来表示函数的局部变量寄存器，v2表示传入的对象引用，v3，v4表示两个传入的整形参数</span><br><span class="line">p命名法，v0,v1用来表示函数的局部变量寄存器，p0表示传入的对象的引用，p1，p2分别表示传入的两个整形参数</span><br><span class="line">p0代表的是this，p1开始代表函数参数，静态函数没有this，所以从p0开始就代表参数</span><br></pre></td></tr></table></figure>
</li>
<li><p>.prologue</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">指定了代码开始处</span><br></pre></td></tr></table></figure>
</li>
<li><p>.line</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表明这是在java源码中的第几行，其实这个值无所谓是多少，可以任意修改，主要用于调试</span><br></pre></td></tr></table></figure>
</li>
<li><p>invoke-direct</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是对方法的调用</span><br></pre></td></tr></table></figure>
</li>
<li><p>.parameter</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">指明了参数名</span><br></pre></td></tr></table></figure>
</li>
<li><p>return-void</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">返回类型</span><br></pre></td></tr></table></figure>
</li>
<li><p>invoke-static</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用于调用static函数,invoke-static后面有一对大括号“&#123;&#125;”，其实是调用该方法的实例+参数列表</span><br><span class="line">invoke-static &#123;v3,v0&#125;, Landroid/util/log;-&gt;v(Ljava/lang/String;Ljava/lang/String;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>invoke-virtual</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用于调用protected或public函数，同样注意修改smali时不要错用invoke-direct或invoke-static</span><br><span class="line">invoke-virtual &#123;v1&#125;, Landroid/app/Activity;-&gt;getApplicationContext()Landroid/content/Context;</span><br></pre></td></tr></table></figure>
</li>
<li><p>invoke-direct</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">调用private函数</span><br><span class="line">invoke-direct &#123;v0, v4&#125;, Lcom/android/server/LightsService;-&gt;&lt;init&gt;(Landroid/content/Context;)V</span><br></pre></td></tr></table></figure>
</li>
<li><p>invoke-super</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">调用父类方法用的指令，一般用于调用onCreate、onDestroy等方法。</span><br><span class="line">invoke-super &#123;p0, p1&#125;, Landroid/preference/PreferenceActivity;-&gt;onCreate(Landroid/os/Bundle;)V    //p0：this，p1：Bundle</span><br><span class="line">invoke-super &#123;p0, p1, p2&#125;, Landroid/view/View;-&gt;onKeyUp(ILandroid/view/KeyEvent;)Z</span><br><span class="line">invoke-super &#123;p0, p1&#125;, Landroid/app/Activity;-&gt;onCreate(Landroid/os/Bundle;)V</span><br></pre></td></tr></table></figure>
</li>
<li><p>invokeinterface</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">调用接口方法，调用的方法运行时确认实际调用，即会在运行时才确定一个实现此接口的对象。</span><br></pre></td></tr></table></figure>
</li>
<li><p>const</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const v0, 0x7f04001b  //将值0x7f04001b 放入寄存器v0</span><br><span class="line">const/4 v2, 0x1       //4字节常量   v2=1</span><br></pre></td></tr></table></figure>
</li>
<li><p>new-instance</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">新建一个实例</span><br><span class="line">new-instance v1, Lcom/droider/crackme0502/MainActivity$1; #新建一个MainActivity$1实例  </span><br><span class="line">invoke-direct &#123;v1, p0&#125;, Lcom/droider/crackme0502/MainActivity$1;-&gt;&lt;init&gt;(Lcom/droider/crackme0502/MainActivity;)V # 初始化MainActivity$1实例  </span><br></pre></td></tr></table></figure>
</li>
<li><p>iput-object</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对象赋值</span><br><span class="line">iput-object v1, p0, Lcom/leachchen/testnixiang/MainActivity;-&gt;tree:Lcom/leachchen/testnixiang/Tree;  相当于tree = new Tree(); tree是类成员变量</span><br></pre></td></tr></table></figure>
</li>
<li><p>iget-object</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">调用对象</span><br><span class="line">iget-object v1, p0, Lcom/leachchen/testnixiang/MainActivity;-&gt;tree:Lcom/leachchen/testnixiang/Tree; 相当于获取到tree对象</span><br><span class="line">invoke-virtual &#123;v1&#125;, Lcom/leachchen/testnixiang/Tree;-&gt;go()V  相当于调用Tree类的go方法，tree.go();</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-eq vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA等于vB则跳转到:cond_</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-ne vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA不等于vB则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-lt vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA小于vB则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-ge vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA大于等于vB则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-gt vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA大于vB则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-le vA, vB, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA小于等于vB则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-eqz vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA等于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-nez vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA不等于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-ltz vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA小于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-gez vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA大于等于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-gtz vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA大于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-lez vA, :cond_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果vA小于等于0则跳转到:cond_**</span><br></pre></td></tr></table></figure>
</li>
<li><p>sput-boolean</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Puts boolean value in vx into a static field.</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h1><p>Smali 是 Android Dalvik 虚拟机（DEX 格式）的汇编语言（Smali是Dalvik的寄存器语言），它是对 <code>.dex</code> 文件的反编译结果。</p>
<p>Smali与Java的关系，简单理解就是汇编之于C。假如你对汇编有足够的驾驭能力，那你可以通过修改汇编代码来改变C&#x2F;C++代码的走向。当然，学过汇编的都清楚，汇编比BrainFuck还难学，更不用说去反编译修改了。</p>
<p>但是Smali有一点不一样，就是它很简单，只有一点点的语法，只要会java，了解Android的相关知识，那完全可以通过修改Smali代码来反向修改java代码，虽然绕了一点。</p>
<ul>
<li>samli是一种低级语言，用于描述Android应用程序的字节码</li>
<li>基于寄存器的架构，所有的操作都通过寄存器完成</li>
<li>寄存器命名规则：v0，v1，v3……或p0，p1，p2……（p通常表示方法参数）</li>
</ul>
<p>​	一段Dalvik汇编代码由一系列Dalvik指令组成，指令语法由指令的位描述与指令格式标识来决定。位描述约定如下：</p>
<ul>
<li>每16位的字采用空格分隔开来。</li>
<li>每个字母表示四位，每个字母按顺序从高字节开始，排列到低字节。</li>
<li>每四位之间可能使用竖线“『”来表示不同的内容。</li>
<li>顺序采用A~Z的单个大写字母作为一个4位的操作码，op表示一个8位的操作码。</li>
<li>“<strong>∅</strong>”来表示这字段所有位为0值。</li>
</ul>
<p>​	以指令格式“A|G|op BBBBF|E|D|C”为例：<br>​	指令中间有两个空格，每个分开的部分大小为16位，所以这条指令由三个16位的字组成。第一个16位是“A|G|op”，高8位由A与G组成，低字节由操作码op组成。第二个16位由BBBB组成，它表示一个16位的偏移值。第三个16位分别由F、E、D、C共四个4字节组成，在这里它们表示寄存器参数。<br>​	单独使用位标识还无法确定一条指令，必须通过指令格式标识来指定指令的格式编码。它的约定如下：</p>
<ul>
<li>指令格式标识大多由三个字符组成，前两个是数字，最后一个是字母。</li>
<li>第一个数字是表示指令有多少个16位的字组成。</li>
<li>xxxxxxxxxx import tkinter as tkfrom tkinter import messagebox, simpledialog, filedialogimport json​class TravelManagementSystem:    def <strong>init</strong>(self, root):        self.root &#x3D; root        self.root.title(“旅游管理系统”)        self.root.geometry(“400x300”)        self.attractions &#x3D; []        self.routes &#x3D; []        self.center_window(self.root)        self.create_main_menu()​    def center_window(self, window):        window.update_idletasks()        width &#x3D; window.winfo_width()        height &#x3D; window.winfo_height()        x &#x3D; (window.winfo_screenwidth() &#x2F;&#x2F; 2) - (width &#x2F;&#x2F; 2)        y &#x3D; (window.winfo_screenheight() &#x2F;&#x2F; 2) - (height &#x2F;&#x2F; 2)        window.geometry(f”{width}x{height}+{x}+{y}”)​    def create_main_menu(self):        main_frame &#x3D; tk.Frame(self.root)        main_frame.pack(expand&#x3D;True)​        options_first_row &#x3D; [“景点管理”, “路线管理”, “费用结算”]        options_second_row &#x3D; [“报告生成”, “保存数据”, “加载数据”]        options_third_row &#x3D; [“退出程序”]        row_frames &#x3D; [tk.Frame(main_frame) for _ in range(3)]        for frame in row_frames:            frame.pack(fill&#x3D;tk.X, pady&#x3D;5)        for i, option in enumerate(options_first_row):            button &#x3D; tk.Button(row_frames[0], text&#x3D;option, command&#x3D;lambda opt&#x3D;option: self.handle_option(opt), width&#x3D;15)            button.pack(side&#x3D;tk.LEFT, expand&#x3D;True, padx&#x3D;5)        for i, option in enumerate(options_second_row):            button &#x3D; tk.Button(row_frames[1], text&#x3D;option, command&#x3D;lambda opt&#x3D;option: self.handle_option(opt), width&#x3D;15)            button.pack(side&#x3D;tk.LEFT, expand&#x3D;True, padx&#x3D;5)        for i, option in enumerate(options_third_row):            button &#x3D; tk.Button(row_frames[2], text&#x3D;option, command&#x3D;lambda opt&#x3D;option: self.handle_option(opt), width&#x3D;15)            button.pack(side&#x3D;tk.LEFT, expand&#x3D;True, padx&#x3D;5)​    def handle_option(self, option):        if option &#x3D;&#x3D; “景点管理”:            self.manage_attractions()        elif option &#x3D;&#x3D; “路线管理”:            self.manage_routes()        elif option &#x3D;&#x3D; “费用结算”:            self.calculate_costs()        elif option &#x3D;&#x3D; “报告生成”:            self.generate_report()        elif option &#x3D;&#x3D; “保存数据”:            self.save_data()        elif option &#x3D;&#x3D; “加载数据”:            self.load_data()        elif option &#x3D;&#x3D; “退出程序”:            self.root.quit()​    def manage_attractions(self):        attraction_window &#x3D; tk.Toplevel(self.root)        attraction_window.title(“景点管理”)        attraction_window.geometry(“400x400”)        self.center_window(attraction_window)        attraction_window.grab_set()  ​        attractions_listbox &#x3D; tk.Listbox(attraction_window, height&#x3D;8, width&#x3D;40)        attractions_listbox.pack(pady&#x3D;10)​        for attraction in self.attractions:            attractions_listbox.insert(tk.END, attraction[‘name’])​        def show_attraction_details(event):            selected_indices &#x3D; attractions_listbox.curselection()            if not selected_indices:                return            selected_index &#x3D; selected_indices[0]            attraction &#x3D; self.attractions[selected_index]​            detail_window &#x3D; tk.Toplevel(attraction_window)            detail_window.title(f”景点详情 - {attraction[‘name’]}”)            detail_window.geometry(“400x300”)            self.center_window(detail_window)            detail_window.grab_set()​            details_text &#x3D; (f”名称: {attraction[‘name’]}\n位置: {attraction[‘location’]}\n描述: {attraction[‘description’]}\n”                            f”门票价格: {attraction[‘ticket_price’]}元\n开放时间: {attraction[‘play_time’]}小时”)            tk.Label(detail_window, text&#x3D;details_text).pack(pady&#x3D;10)​            modify_button &#x3D; tk.Button(detail_window, text&#x3D;”修改景点”,                                      command&#x3D;lambda idx&#x3D;selected_index: self.modify_attraction(idx, detail_window))            delete_button &#x3D; tk.Button(detail_window, text&#x3D;”删除景点”,                                      command&#x3D;lambda idx&#x3D;selected_index: self.delete_attraction(idx, detail_window))​            modify_button.pack(side&#x3D;tk.LEFT, padx&#x3D;5)            delete_button.pack(side&#x3D;tk.RIGHT, padx&#x3D;5)​        attractions_listbox.bind(‘&lt;<ListboxSelect>&gt;’, show_attraction_details)​        add_button &#x3D; tk.Button(attraction_window, text&#x3D;”添加景点”,                               command&#x3D;lambda: self.add_attraction(attraction_window))        search_button &#x3D; tk.Button(attraction_window, text&#x3D;”查找景点”, command&#x3D;self.search_attraction)​        add_button.pack(side&#x3D;tk.LEFT, padx&#x3D;5)        search_button.pack(side&#x3D;tk.RIGHT, padx&#x3D;5)​    def add_attraction(self, parent_window):        add_window &#x3D; tk.Toplevel(parent_window)        add_window.title(“添加景点”)        add_window.geometry(“400x300”)        self.center_window(add_window)        add_window.grab_set()  ​        tk.Label(add_window, text&#x3D;”景点名称:”).grid(row&#x3D;0, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        name_entry &#x3D; tk.Entry(add_window)        name_entry.grid(row&#x3D;0, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(add_window, text&#x3D;”位置:”).grid(row&#x3D;1, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        location_entry &#x3D; tk.Entry(add_window)        location_entry.grid(row&#x3D;1, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(add_window, text&#x3D;”描述:”).grid(row&#x3D;2, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        description_entry &#x3D; tk.Entry(add_window)        description_entry.grid(row&#x3D;2, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(add_window, text&#x3D;”门票价格(元):”).grid(row&#x3D;3, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        ticket_price_entry &#x3D; tk.Entry(add_window)        ticket_price_entry.grid(row&#x3D;3, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(add_window, text&#x3D;”开放时间:”).grid(row&#x3D;4, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        play_time_entry &#x3D; tk.Entry(add_window)        play_time_entry.grid(row&#x3D;4, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        confirm_button &#x3D; tk.Button(add_window, text&#x3D;”确认”,                                   command&#x3D;lambda: self.confirm_add_attraction(name_entry.get(), location_entry.get(),                                                                               description_entry.get(),                                                                               ticket_price_entry.get(),                                                                               play_time_entry.get(), add_window,                                                                               parent_window))        confirm_button.grid(row&#x3D;5, column&#x3D;0, columnspan&#x3D;2, pady&#x3D;10)​    def confirm_add_attraction(self, name, location, description, ticket_price, play_time, add_window, parent_window):        try:            ticket_price &#x3D; float(ticket_price)        except ValueError:            messagebox.showwarning(“警告”, “门票价格必须是数字！”, parent&#x3D;add_window)            return​        if all([name, location, description, ticket_price, play_time]):            new_attraction &#x3D; {                ‘name’: name,                ‘location’: location,                ‘description’: description,                ‘ticket_price’: ticket_price,                ‘play_time’: play_time            }            self.attractions.append(new_attraction)            messagebox.showinfo(“成功”, “景点已添加”, parent&#x3D;add_window)            add_window.destroy()            parent_window.destroy()        else:            messagebox.showwarning(“警告”, “请填写所有字段！”, parent&#x3D;add_window)​    def search_attraction(self):        search_name &#x3D; simpledialog.askstring(“查找景点”, “请输入景点名称:”, parent&#x3D;self.root)​        found_attractions &#x3D; [a for a in self.attractions if a[‘name’].lower() &#x3D;&#x3D; search_name.lower()]​        if found_attractions:            self.show_search_results(found_attractions)        else:            messagebox.showinfo(“结果”, “未找到该景点。”, parent&#x3D;self.root)​    def show_search_results(self, attractions):        result_window &#x3D; tk.Toplevel(self.root)        result_window.title(“搜索结果”)        result_window.geometry(“400x300”)        self.center_window(result_window)        result_window.grab_set()​        for attraction in attractions:            details_text &#x3D; (f”名称: {attraction[‘name’]}\n位置: {attraction[‘location’]}\n描述: {attraction[‘description’]}\n”                            f”门票价格: {attraction[‘ticket_price’]}元\n开放时间: {attraction[‘play_time’]}小时”)            tk.Label(result_window, text&#x3D;details_text).pack(pady&#x3D;5)​            modify_button &#x3D; tk.Button(result_window, text&#x3D;”修改景点”,                                      command&#x3D;lambda attr&#x3D;attraction: self.modify_attraction_by_name(attr,                                                                                                     result_window))            delete_button &#x3D; tk.Button(result_window, text&#x3D;”删除景点”,                                      command&#x3D;lambda attr&#x3D;attraction: self.delete_attraction_by_name(attr,                                                                                                     result_window))​            modify_button.pack(side&#x3D;tk.LEFT, padx&#x3D;5)            delete_button.pack(side&#x3D;tk.RIGHT, padx&#x3D;5)​    def modify_attraction(self, index, parent_window):        attraction &#x3D; self.attractions[index]​        modify_window &#x3D; tk.Toplevel(parent_window)        modify_window.title(“修改景点”)        modify_window.geometry(“400x300”)        self.center_window(modify_window)        modify_window.grab_set()​        tk.Label(modify_window, text&#x3D;”景点名称:”).grid(row&#x3D;0, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        name_entry &#x3D; tk.Entry(modify_window)        name_entry.insert(0, attraction[‘name’])        name_entry.grid(row&#x3D;0, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(modify_window, text&#x3D;”位置:”).grid(row&#x3D;1, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        location_entry &#x3D; tk.Entry(modify_window)        location_entry.insert(0, attraction[‘location’])        location_entry.grid(row&#x3D;1, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(modify_window, text&#x3D;”描述:”).grid(row&#x3D;2, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        description_entry &#x3D; tk.Entry(modify_window)        description_entry.insert(0, attraction[‘description’])        description_entry.grid(row&#x3D;2, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(modify_window, text&#x3D;”门票价格(元):”).grid(row&#x3D;3, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        ticket_price_entry &#x3D; tk.Entry(modify_window)        ticket_price_entry.insert(0, str(attraction[‘ticket_price’]))        ticket_price_entry.grid(row&#x3D;3, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        tk.Label(modify_window, text&#x3D;”开放时间:”).grid(row&#x3D;4, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        play_time_entry &#x3D; tk.Entry(modify_window)        play_time_entry.insert(0, str(attraction[‘play_time’]))        play_time_entry.grid(row&#x3D;4, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        confirm_button &#x3D; tk.Button(modify_window, text&#x3D;”确认”,                                   command&#x3D;lambda: self.confirm_modify_attraction(index, name_entry.get(),                                                                                  location_entry.get(),                                                                                  description_entry.get(),                                                                                  ticket_price_entry.get(),                                                                                  play_time_entry.get(), modify_window))        confirm_button.grid(row&#x3D;5, column&#x3D;0, columnspan&#x3D;2, pady&#x3D;10)​    def confirm_modify_attraction(self, index, name, location, description, ticket_price, play_time, window):        try:            ticket_price &#x3D; float(ticket_price)        except ValueError:            messagebox.showwarning(“警告”, “门票价格必须是数字！”, parent&#x3D;window)            return​        if all([name, location, description, ticket_price, play_time]):            self.attractions[index] &#x3D; {                ‘name’: name,                ‘location’: location,                ‘description’: description,                ‘ticket_price’: ticket_price,                ‘play_time’: play_time            }            messagebox.showinfo(“成功”, “景点已修改！”, parent&#x3D;window)            window.destroy()        else:            messagebox.showwarning(“警告”, “请填写所有字段！”, parent&#x3D;window)​    def delete_attraction(self, index, parent_window):        del self.attractions[index]        messagebox.showinfo(“成功”, “景点已删除！”, parent&#x3D;parent_window)        parent_window.destroy()​    def modify_attraction_by_name(self, attraction, parent_window):        index &#x3D; next((i for i, a in enumerate(self.attractions) if a[‘name’] &#x3D;&#x3D; attraction[‘name’]), None)        if index is not None:            self.modify_attraction(index, parent_window)​    def delete_attraction_by_name(self, attraction, parent_window):        index &#x3D; next((i for i, a in enumerate(self.attractions) if a[‘name’] &#x3D;&#x3D; attraction[‘name’]), None)        if index is not None:            self.delete_attraction(index, parent_window)​    def manage_routes(self):        route_window &#x3D; tk.Toplevel(self.root)        route_window.title(“路线管理”)        route_window.geometry(“400x400”)        self.center_window(route_window)        route_window.grab_set()​        frame_top &#x3D; tk.Frame(route_window)        frame_top.pack(pady&#x3D;10)​        tk.Label(frame_top, text&#x3D;”选择景点:”).grid(row&#x3D;0, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)​        self.selected_attractions &#x3D; []        for i, attraction in enumerate(self.attractions):            var &#x3D; tk.IntVar(value&#x3D;0)            cb &#x3D; tk.Checkbutton(frame_top, text&#x3D;attraction[‘name’], variable&#x3D;var)            cb.grid(row&#x3D;i + 1, column&#x3D;0, sticky&#x3D;’w’)            self.selected_attractions.append(var)​        route_name_label &#x3D; tk.Label(frame_top, text&#x3D;”路线名称:”)        route_name_entry &#x3D; tk.Entry(frame_top)        route_name_label.grid(row&#x3D;len(self.attractions) + 2, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)        route_name_entry.grid(row&#x3D;len(self.attractions) + 2, column&#x3D;1, padx&#x3D;5, pady&#x3D;5)​        add_route_button &#x3D; tk.Button(frame_top, text&#x3D;”添加路线”,                                     command&#x3D;lambda entry&#x3D;route_name_entry: self.add_route(entry.get(), route_window))        add_route_button.grid(row&#x3D;len(self.attractions) + 3, column&#x3D;0, columnspan&#x3D;2, pady&#x3D;10)​        view_routes_button &#x3D; tk.Button(route_window, text&#x3D;”查看路线”, command&#x3D;self.view_routes)        view_routes_button.pack(pady&#x3D;10)​    def add_route(self, route_name, parent_window):        if not route_name.strip():            messagebox.showwarning(“警告”, “请输入路线名称！”, parent&#x3D;parent_window)            return​        selected_indices &#x3D; [i for i, var in enumerate(self.selected_attractions) if var.get()]        if not selected_indices:            messagebox.showwarning(“警告”, “请选择至少一个景点！”, parent&#x3D;parent_window)            return​        selected_attractions &#x3D; [self.attractions[i][‘name’] for i in selected_indices]​        new_route &#x3D; {            ‘name’: route_name,            ‘attractions’: selected_attractions        }​        self.routes.append(new_route)        messagebox.showinfo(“成功”, “路线已添加！”, parent&#x3D;parent_window)        parent_window.destroy()​    def view_routes(self):        view_window &#x3D; tk.Toplevel(self.root)        view_window.title(“查看路线”)        view_window.geometry(“400x300”)        self.center_window(view_window)        view_window.grab_set()  ​        for route in self.routes:            route_info &#x3D; f”路线名称: {route[‘name’]}\n景点: {‘, ‘.join(route[‘attractions’])}”            tk.Label(view_window, text&#x3D;route_info).pack(pady&#x3D;5)​    def calculate_costs(self):        cost_window &#x3D; tk.Toplevel(self.root)        cost_window.title(“费用结算”)        cost_window.geometry(“400x300”)        self.center_window(cost_window)        cost_window.grab_set()  ​        frame_top &#x3D; tk.Frame(cost_window)        frame_top.pack(pady&#x3D;10)​        tk.Label(frame_top, text&#x3D;”选择路线:”).grid(row&#x3D;0, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)​        self.selected_routes &#x3D; []        for i, route in enumerate(self.routes):            var &#x3D; tk.IntVar(value&#x3D;0)            cb &#x3D; tk.Checkbutton(frame_top, text&#x3D;route[‘name’], variable&#x3D;var)            cb.grid(row&#x3D;i + 1, column&#x3D;0, sticky&#x3D;’w’)            self.selected_routes.append(var)​        calculate_button &#x3D; tk.Button(frame_top, text&#x3D;”计算费用”, command&#x3D;lambda: self.calculate_total_cost(cost_window))        calculate_button.grid(row&#x3D;len(self.routes) + 2, column&#x3D;0, columnspan&#x3D;2, pady&#x3D;10)​    def calculate_total_cost(self, window):        selected_indices &#x3D; [i for i, var in enumerate(self.selected_routes) if var.get()]        if not selected_indices:            messagebox.showwarning(“警告”, “请选择至少一条路线！”, parent&#x3D;window)            return​        total_cost &#x3D; 0        try:            for i in selected_indices:                route &#x3D; self.routes[i]                for attraction_name in route[‘attractions’]:                    attraction &#x3D; next((a for a in self.attractions if a[‘name’] &#x3D;&#x3D; attraction_name), None)                    if attraction:                        total_cost +&#x3D; float(attraction[‘ticket_price’])                    else:                        messagebox.showwarning(“警告”, “未找到该景点的门票价格！”, parent&#x3D;window)                        return        except Exception as e:            messagebox.showerror(“错误”, f”计算费用时发生错误: {str(e)}”, parent&#x3D;window)            return​        messagebox.showinfo(“总费用”, f”所选路线的总费用为: {total_cost}元”, parent&#x3D;window)        window.destroy()​    def generate_report(self):        report_window &#x3D; tk.Toplevel(self.root)        report_window.title(“报告生成”)        report_window.geometry(“400x300”)        self.center_window(report_window)        report_window.grab_set()        frame_top &#x3D; tk.Frame(report_window)        frame_top.pack(pady&#x3D;10)        tk.Label(frame_top, text&#x3D;”选择路线:”).grid(row&#x3D;0, column&#x3D;0, padx&#x3D;5, pady&#x3D;5)​        self.report_selected_routes &#x3D; []        for i, route in enumerate(self.routes):            var &#x3D; tk.IntVar(value&#x3D;0)            cb &#x3D; tk.Checkbutton(frame_top, text&#x3D;route[‘name’], variable&#x3D;var)            cb.grid(row&#x3D;i + 1, column&#x3D;0, sticky&#x3D;’w’)            self.report_selected_routes.append(var)​        save_button &#x3D; tk.Button(frame_top, text&#x3D;”保存报告”, command&#x3D;lambda: self.save_report(report_window))        save_button.grid(row&#x3D;len(self.routes) + 2, column&#x3D;0, columnspan&#x3D;2, pady&#x3D;10)​    def save_report(self, window):        selected_indices &#x3D; [i for i, var in enumerate(self.report_selected_routes) if var.get()]        if not selected_indices:            messagebox.showwarning(“警告”, “请选择至少一条路线！”, parent&#x3D;window)            return​        filename &#x3D; filedialog.asksaveasfilename(defaultextension&#x3D;”.txt”,                                                filetypes&#x3D;[(“Text files”, “<em>.txt”), (“All files”, “</em>.<em>“)],                                                parent&#x3D;window)​        if filename:            with open(filename, ‘w’) as file:                for i in selected_indices:                    route &#x3D; self.routes[i]                    file.write(f”路线名称: {route[‘name’]}\n景点:\n”)                    for attraction_name in route[‘attractions’]:                        attraction &#x3D; next(a for a in self.attractions if a[‘name’] &#x3D;&#x3D; attraction_name)                        file.write(                            f”- 名称: {attraction[‘name’]}\n  位置: {attraction[‘location’]}\n  描述: {attraction[‘description’]}\n  “                            f”门票价格: {attraction[‘ticket_price’]}元\n  开放时间: {attraction[‘play_time’]}小时\n”)                    file.write(“\n”)​            messagebox.showinfo(“成功”, “报告已保存！”, parent&#x3D;window)        window.destroy()​    def save_data(self):        data &#x3D; {            ‘attractions’: self.attractions,            ‘routes’: self.routes        }​        filename &#x3D; filedialog.asksaveasfilename(defaultextension&#x3D;”.json”,                                                filetypes&#x3D;[(“JSON files”, “</em>.json”), (“All files”, “<em>.</em>“)])        if filename:            with open(filename, ‘w’) as file:                json.dump(data, file, ensure_ascii&#x3D;False, indent&#x3D;4)​            messagebox.showinfo(“成功”, “数据已保存！”)​    def load_data(self):        filename &#x3D; filedialog.askopenfilename(filetypes&#x3D;[(“JSON files”, “<em>.json”), (“All files”, “</em>.*”)])        if filename:            choice &#x3D; messagebox.askyesno(“确认”, “您希望覆盖现有数据还是添加到现有数据？\n点击’是’覆盖，点击’否’添加。”)            with open(filename, ‘r’) as file:                data &#x3D; json.load(file)            if choice:                self.attractions &#x3D; data.get(‘attractions’, [])                self.routes &#x3D; data.get(‘routes’, [])            else:                self.attractions.extend(data.get(‘attractions’, []))                self.routes.extend(data.get(‘routes’, []))            messagebox.showinfo(“成功”, “数据已加载！”)​if <strong>name</strong> &#x3D;&#x3D; “<strong>main</strong>“:    root &#x3D; tk.Tk()    app &#x3D; TravelManagementSystem(root)    root.mainloop()python</li>
<li>第三个字母为类型码，表示指令用到的额外数据的类型。取值见表3-1。</li>
</ul>
<p>​	还有一种特殊的情况是末尾可能会多出另一个字母，如果是字母s表示指令采用静态链接，如果是字母i表示指令应该被内联处理。</p>
<p><img src="https://cdn.jsdelivr.net/gh/tangxtang1119/Pictures@master/%E6%8C%87%E4%BB%A4%E6%A0%BC%E5%BC%8F%E6%A0%87%E8%AF%86%E7%9A%84%E7%B1%BB%E5%9E%8B%E7%A0%81.png"></p>
<h1 id="两种不同的寄存器表示方法"><a href="#两种不同的寄存器表示方法" class="headerlink" title="两种不同的寄存器表示方法"></a><strong>两种不同的寄存器表示方法</strong></h1><p>v命名法与p命名法<br>    v命名法与p命名法，它们是Dalvik字节码中两种不同的寄存器表示方法。下面来看看，它们在表现上有一些什么样的区别。<br>    假设一个函数使用到M个寄存器，并且该函数有N个参数，根据Dalvik虚拟机参数传递方式中的规定：参数使用最后的N个寄存器中，局部变量使用从vO开始的前M-N个寄存器。如前面的小节中，foo0函数使用到了5个寄存器，2个显式的整形参数，其中foo0函数是Hello类的非静态方法，函数被调用时会传入一个隐式的Hello对象引用，因此，实际传入的参数数量是3个。根据传参规则，局部变量将使用前2个寄存器，参数会使用后3个寄存器。<br>    v命名法采用以小写字母“v”开头的方式表示函数中用到的局部变量与参数，所有的寄存器命名从v0开始，依次递增。对于 foo0函数，v命名法会用到v0、v1、v2、v3、v4等五个寄存器，v0与v1用来表示函数的局部变量寄存器，v2表示被传入的Hello对象的引用，v3与v4分别表示两个传入的整形参数。<br>    p命名法对函数的局部变量寄存器命名没有影响，它的命名规则是：函数中引入的参数命名从p0开始，依次递增。对于 foo0函数，p命名法会用到v0、v1、pO、pl、p2等五个寄存器，v0与v1同样用来表示函数的局部变量寄存器，p0表示被传入的Hello对象的引用，pl与p2分别表示两个传入的整形参数。<br>    对于有M个寄存器及N个参数的函数fooO来说，v命名法与p命名法的表现形式。通过观察可以发现，使用p命名法表示的Dalvik汇编代码，通过寄存器的前缀更容易判断寄存器到底是局部变量寄存器还是参数寄存器，在Dalvik汇编代码较长、使用寄存器较多的情况下，这种优势将更加明显。</p>
<p>​	<img src="https://cdn.jsdelivr.net/gh/tangxtang1119/Pictures@master/v%E5%91%BD%E5%90%8D%E6%B3%95%E4%B8%8Ep%E5%91%BD%E5%90%8D%E6%B3%95.png"></p>
<h1 id="Smali文件的产生"><a href="#Smali文件的产生" class="headerlink" title="Smali文件的产生"></a>Smali文件的产生</h1><p>​	Smali代码是安卓APK反编译而来的，所以Smali文件和Java文件一一对应。获取Smali文件，需要下载一个辅助工具：APKTool。APKTool这个命令行工具如果详细使用功能参数事比较多的，但是这里只需要用到最基础的两个功能。</p>
<p>一个是反编译decode：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool d xxxx.apk</span><br></pre></td></tr></table></figure>

<p>另一个是打包build：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool b</span><br></pre></td></tr></table></figure>

<p>这里要注意的是路径问题，记得将apktool添加到环境变量中去。</p>
<p>另一个是打包，如果指示简单的使用参数b，那要求是在反编译出来的项目目录下执行，而打包好的问价会保存在这个项目目录下的dist目录。</p>
<p>以<code>Hello.java</code> 为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HELLO_WORLD</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(HELLO_WORLD);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>javac</code> 生成 <code>Hello.class</code> 文件，然后通过 Sdk 自带的 <code>dx</code> 工具生成 <code>Hello.dex</code> 文件，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dx --dex --output=Hello.dex  Hello.class</span><br></pre></td></tr></table></figure>

<p><code>dx</code> 工具位于 Sdk 的 <code>build-tools</code> 目录下，可添加至环境变量方便调用。<code>dx</code> 也支持多 Class 文件生成 dex。</p>
<p><code>dex</code> 转 <code>smali</code> 使用的工具是 <code>baksmali.jar</code> ，最新版本是 <code>2.2.5</code> ，<a href="https://link.juejin.cn/?target=https://bitbucket.org/JesusFreke/smali/downloads/">点击下载</a>，使用命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar baksmali-2.2.5.jar d hello.dex</span><br></pre></td></tr></table></figure>

<p>执行完成后，会在当前目录生成 <code>out</code> 文件夹，文件夹内包含生成的 <code>smali</code> 文件。</p>
<p>生成的 <code>Hello.smali</code> 文件内容：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LHello;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;Hello.java&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># static fields</span></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span><span class="keyword"> static</span> HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># direct methods</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> static</span><span class="keyword"> constructor</span> &lt;clinit&gt;()V</span><br><span class="line"><span class="keyword">    .registers</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 3</span><br><span class="line">   <span class="built_in"> const-string </span>v0, <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> sput-object </span>v0, <span class="class">LHello;</span>-&gt;HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;()V</span><br><span class="line"><span class="keyword">    .registers</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 1</span><br><span class="line">   <span class="built_in"> invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line"></span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> main([<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line"><span class="keyword">    .registers</span> 3</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 6</span><br><span class="line">   <span class="built_in"> sget-object </span>v0, <span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> sget-object </span>v1, <span class="class">LHello;</span>-&gt;HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> invoke-virtual </span>&#123;v0, v1&#125;, <span class="class">Ljava/io/PrintStream;</span>-&gt;println(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .line</span> 7</span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>dalvik字节码有两种类型，原始类型和引用类型。对象和数组是引用类型，其它都是原始类型。</p>
<p>smali数据类型都是用一个字母表示，如果你熟悉Java的数据类型，你会发现表示smali数据类型的字母其实是Java基本数据类型首字母的大写，除boolean类型外，在smail中用大写的”Z”表示boolean类型。</p>
<table>
<thead>
<tr>
<th>Smali</th>
<th>Java</th>
</tr>
</thead>
<tbody><tr>
<td>V</td>
<td>void，只能用于返回值类型</td>
</tr>
<tr>
<td>Z</td>
<td>boolean</td>
</tr>
<tr>
<td>B</td>
<td>byte</td>
</tr>
<tr>
<td>S</td>
<td>short</td>
</tr>
<tr>
<td>C</td>
<td>char</td>
</tr>
<tr>
<td>I</td>
<td>int</td>
</tr>
<tr>
<td>J</td>
<td>long (64 bits)</td>
</tr>
<tr>
<td>F</td>
<td>float</td>
</tr>
<tr>
<td>D</td>
<td>double (64 bits)</td>
</tr>
<tr>
<td>[</td>
<td>数组</td>
</tr>
<tr>
<td>L+全类名路径用&#x2F;分割;结尾</td>
<td>object</td>
</tr>
</tbody></table>
<p><strong>对象的表示形式</strong></p>
<p>对于基本类型和 Void 类型，都是用一个大写字母表示。对于引用类型，<u>使用字母 <code>L</code> 加上对象类型的全限定名来表示</u>。</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">Lpackage/name/ObjectName;</span></span><br><span class="line"><span class="comment">#L表示这是一个对象类型</span></span><br><span class="line"><span class="comment">#package/name/是该对象所在的包</span></span><br><span class="line"><span class="comment">#ObjectName是对象的名字</span></span><br><span class="line"><span class="comment">#“;”表示对象名称的结束</span></span><br></pre></td></tr></table></figure>

<p>相当于java中的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>.name.ObjectName</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#smali</span></span><br><span class="line"><span class="class">Ljava/lang/String;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#java:</span><br><span class="line">java.lang.String</span><br></pre></td></tr></table></figure>

<p><strong>数组的表现形式</strong></p>
<p>[ 表示一个整型一维数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[I</span><br><span class="line">#相当于java中的int[]</span><br></pre></td></tr></table></figure>

<p>对于多维数组，只要增加[就行了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[I</span><br><span class="line">#相当于java中的int[][]</span><br><span class="line">[[[I</span><br><span class="line">#相当于java中的int[][][]</span><br></pre></td></tr></table></figure>

<p>注意每一维的最多255个</p>
<p><strong>对象数组的表现形式</strong></p>
<p>表示一个String对象数组</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="class">Ljava/lang/String;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><p>方法通常必须详细的指定方法类型、方法名、参数类型、返回类型，所有这些信息都是为虚拟机是能够找到正确的方法并执行。</p>
<p><strong>方法的表示形式</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">Lpackage/name/ObjectName;</span>-&gt;MethodName(III)Z</span><br><span class="line"><span class="comment">#Lpackage/name/ObjectName;表示类型</span></span><br><span class="line"><span class="comment">#MethodName是方法名</span></span><br><span class="line"><span class="comment">#III为参数（在此是3个整型参数）</span></span><br><span class="line"><span class="comment">#Z是返回类型（bool型）</span></span><br></pre></td></tr></table></figure>



<p>方法的参数是一个接一个的，中间没有隔开</p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">method(I[[IILjava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;</span><br><span class="line">#在java中则为：String method(int, int[][], int, String, Object[])</span><br></pre></td></tr></table></figure>

<p>一个比较全面的例子：</p>
<ul>
<li>“.method”和“.end method”类似于Java中的大括号，包含了方法的实现代码段。</li>
</ul>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> interface<span class="keyword"> abstract</span> <span class="class">Lcom/kit/network/CachableImage;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;SourceFile&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># virtual methods</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> getIsLarge()Z<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> getUrl()<span class="class">Ljava/lang/String;</span><span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> getViewContext()<span class="class">Landroid/content/Context;</span><span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> setBitmap(<span class="class">Landroid/graphics/Bitmap;</span>Z)V<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> setIsLarge(Z)V<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> abstract</span> setUrl(<span class="class">Ljava/lang/String;</span>)V<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p>上面的smali代码还原后的java代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#注：在实际代码中我们还必须引入相关的包</span></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CachableImage</span> &#123;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">boolean</span> <span class="title function_">getIsLarge</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">getUrl</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> Context <span class="title function_">getViewContext</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">setBitmap</span><span class="params">(Bitmap bitmap)</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">setIsLarge</span><span class="params">(<span class="type">boolean</span> islarge)</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">setUrl</span><span class="params">(String url)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以最开始的<code>Hello.smali</code> 为例，其中包含了三个方法，<code>clinit</code> , <code>init</code> 和 <code>main</code> 方法。<code>main</code> 方法是我们自己编写的，而 <code>clinit</code> 和 <code>init</code> 方法则是 javac 编译时生成的。下面进行逐一分析:</p>
<h2 id="clinit"><a href="#clinit" class="headerlink" title="clinit"></a>clinit</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> static</span><span class="keyword"> constructor</span> &lt;clinit&gt;()V</span><br><span class="line"><span class="keyword">    .registers</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 3</span><br><span class="line">   <span class="built_in"> const-string </span>v0, <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> sput-object </span>v0, <span class="class">LHello;</span>-&gt;HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p><code>clinit</code> 方法会进行静态变量的初始化，静态代码块的执行等操作，该方法在类被加载的时候调用。逐行分析该方法的执行逻辑：</p>
<ul>
<li><code>.registers 1 :</code> 该方法需要使用的寄存器数量。之前已经提到，DalviK VM 是基于寄存器的，字节码可以使用的虚拟寄存器个数可达 65536 个，每个寄存器 32 位，64 位的数据使用相邻两个寄存器表示。最终，所有的虚拟寄存器都会被映射到真实的物理寄存器上。一般情况下，我们使用字母 <code>v</code> 表示局部变量使用的寄存器，使用字母 <code>p</code> 表示参数所使用的寄存器，且局部变量使用的寄存器排列在前，参数使用的寄存器排列在后。这里就表示 <code>clinit</code> 方法仅使用了一个寄存器。</li>
<li><code>const-string v0, &quot;Hello World!&quot;</code> : 将字符串 <code>Hello World！</code> 的引用移到寄存器 <code>v0</code> 中。</li>
<li><code>sput-object v0, LHello;-&gt;HELLO_WORLD:Ljava/lang/String;</code> : 前缀 <code>s</code> 的 <code>sput</code> 和 <code>sget</code> 指令用于静态字段的读写操作。将寄存器 <code>v0</code> 存储的字符串引用赋值给 <code>HELLO_WORLD</code> 字段，结合上一句字节码，这里完成了静态变量 <code>HELLO_WORLD</code> 的赋值工作，也验证了 <code>clinit</code> 方法的确进行了静态变量的初始化。</li>
</ul>
<h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;()V</span><br><span class="line"><span class="keyword">    .registers</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 1</span><br><span class="line">    <span class="comment">#invoke-direct 用于调用非 static 直接方法（也就是说，本质上不可覆盖的实例方法，即 private 实例方法或构造函数）。显然，这里调用的是默认构造函数。</span></span><br><span class="line">   <span class="built_in"> invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="main"><a href="#main" class="headerlink" title="main"></a>main</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> main([<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line"><span class="keyword">    .registers</span> 3</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .prologue</span></span><br><span class="line"><span class="keyword">    .line</span> 6</span><br><span class="line">   <span class="built_in"> sget-object </span>v0, <span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> sget-object </span>v1, <span class="class">LHello;</span>-&gt;HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in"> invoke-virtual </span>&#123;v0, v1&#125;, <span class="class">Ljava/io/PrintStream;</span>-&gt;println(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line"></span><br><span class="line"><span class="keyword">    .line</span> 7</span><br><span class="line">   <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p>最后是 <code>main</code> 方法，从上述 smali 代码我们可以看到 <code>main</code> 方法使用了 3 个寄存器，无返回值（那是肯定的），执行的具体代码是下面三行:</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sget-object v0, <span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">sget-object </span>v1, <span class="class">LHello;</span>-&gt;HELLO_WORLD:<span class="class">Ljava/lang/String;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-virtual </span>&#123;v0, v1&#125;, <span class="class">Ljava/io/PrintStream;</span>-&gt;println(<span class="class">Ljava/lang/String;</span>)V</span><br></pre></td></tr></table></figure>

<p><code>sget</code> 的用法在 <code>clinit</code> 方法中解释过，表示静态字段的读取。</p>
<p>第一句代码，获取类 <code>System</code> 的静态字段 <code>out</code>，其类型是 <code>Ljava/io/PrintStream</code>，并将其引用赋给寄存器 <code>v0</code>。</p>
<p>第二句代码获取在 <code>clinit</code> 方法中已经初始化的静态字段 <code>HELLO_WORLD</code>，并将其引用赋给寄存器 <code>v1</code>。第三句中使用了 <code>invoke-virtual</code> 指令，<code>invoke-virtual</code> 调用正常的虚方法（该方法不是 private、static 或 final，也不是构造函数），之后通常会跟上 <code>&#123;&#125;</code>，<code>&#123;&#125;</code>之中的第一个寄存器通常是指向当前实例对象，如 <code>v0</code> 就是指向 <code>System.out</code> 对象，后面的内容才是该方法真正的参数，如 <code>v1</code>。<code>&#123;&#125;,</code> 之后就是要执行的方法的描述，如 <code>Ljava/io/PrintStream;-&gt;println(Ljava/lang/String;)V</code> ,指的就是 <code>PrintStream</code> 对象的 <code>println</code> 方法。</p>
<p>综上，这三句字节码执行的就是 <code>System.out.println(HELLO_WORLD);</code>。</p>
<p>到这里，<code>Hello.smali</code> 文件就解析完了。</p>
<hr>
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#我是注释</span><br></pre></td></tr></table></figure>

<h1 id="类声明"><a href="#类声明" class="headerlink" title="类声明"></a>类声明</h1><p>基本格式</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span>+权限修饰符+类名;</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#声明类（必须）</span><br><span class="line">.class public LTest;</span><br><span class="line">#声明父类 默认继承Object（必须）如果有明确的继承 将Object替换</span><br><span class="line">.super Ljava/lang/Object;</span><br><span class="line">#如果实现了接口 则必须添加接口代码</span><br><span class="line">.implements Ljava/lang/CharSequence;</span><br><span class="line">#源码文件名（非必填）如果有混淆就会没有这行代码</span><br><span class="line">.source &quot;Test.java&quot;</span><br></pre></td></tr></table></figure>

<p><strong>关于分号：</strong></p>
<p><u>凡是L开头全包名路径结尾都需要加分号</u></p>
<h1 id="字段声明-成员-全局变量"><a href="#字段声明-成员-全局变量" class="headerlink" title="字段声明(成员&#x2F;全局变量)"></a>字段声明(成员&#x2F;全局变量)</h1><p>基本格式：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.field</span> 权限修饰符+静态修饰符+变量名;变量全类名路径;</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;Test.java&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果是非静态的 只需要将static去掉即可</span></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span><span class="keyword"> static</span> a:<span class="class">Ljava/lang/String;</span></span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span> _requestLayout:Z</span><br><span class="line"> </span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> public</span> isLarge:Z</span><br><span class="line"> </span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> public</span> resize:Z</span><br><span class="line"> </span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> public</span> thumbnailSize:I</span><br><span class="line"> </span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> public</span> url:<span class="class">Ljava/lang/String;</span></span><br></pre></td></tr></table></figure>

<p>还原后的java代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> _requestLayout;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> isLarge;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> resize;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> thumbnailSize;</span><br><span class="line"><span class="keyword">public</span> String url;</span><br></pre></td></tr></table></figure>

<p>以一个默认的HelloWorld的应用程序进行解释。新建一个HelloWorld安卓项目，在MainActivity中只保留onCreate函数。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fusijie.helloworld;</span><br><span class="line">  <span class="keyword">import</span> android.app.Activity;</span><br><span class="line">  <span class="keyword">import</span> android.os.Bundle;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">Activity</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">      setContentView(R.layout.activity_main);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>反编译后的Smali文件如下：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">Lcom/fusijie/helloworld/MainActivity;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Landroid/app/Activity;</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;MainActivity.java&quot;</span></span><br><span class="line"><span class="comment"># direct methods</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> ()V</span><br><span class="line">	<span class="comment">#“.locals”指明了这个方法用到的寄存器数量，当然寄存器可以重复利用，从“V0”起算</span></span><br><span class="line"><span class="keyword">  .locals</span> 0</span><br><span class="line">  <span class="comment">#“.prologue”指定了代码开始处。</span></span><br><span class="line"><span class="keyword">  .prologue</span></span><br><span class="line">  <span class="comment">#“.line”表明这是在java源码中的第几行，其实这个值无所谓是多少，可以任意修改，主要用于调试</span></span><br><span class="line"><span class="keyword">  .line</span> 14</span><br><span class="line">  <span class="comment">#“invoke-direct”这是对方法的调用，这里调用了是Android.app.Activity的init方法，这在java里是隐式调用的</span></span><br><span class="line"> <span class="built_in"> invoke-direct </span>&#123;p0&#125;, <span class="class">Landroid/app/Activity;</span>-&gt;()V</span><br><span class="line">  <span class="comment">#“return-void”表明了返回类型，这和java不一样，即使没有返回值，也需要这样写</span></span><br><span class="line"> <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># virtual methods</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> protected</span> onCreate(<span class="class">Landroid/os/Bundle;</span>)V</span><br><span class="line"><span class="keyword">  .locals</span> 1</span><br><span class="line">  <span class="comment">#“.parameter”指明了参数名，但是一般没有用</span></span><br><span class="line"><span class="keyword">  .parameter</span> <span class="string">&quot;savedInstanceState&quot;</span></span><br><span class="line"><span class="keyword">  .prologue</span></span><br><span class="line"><span class="keyword">  .line</span> 18</span><br><span class="line">  <span class="comment">#需要注意的是p0代表的是this，p1开始代表函数参数，静态函数没有this，所以从p0开始就代表参数</span></span><br><span class="line"> <span class="built_in"> invoke-super </span>&#123;p0, p1&#125;, <span class="class">Landroid/app/Activity;</span>-&gt;onCreate(<span class="class">Landroid/os/Bundle;</span>)V</span><br><span class="line"><span class="keyword">  .line</span> 19</span><br><span class="line"> <span class="built_in"> const/high16 </span>v0, 0x7f03</span><br><span class="line"> <span class="built_in"> invoke-virtual </span>&#123;p0, v0&#125;, <span class="class">Lcom/fusijie/helloworld/MainActivity;</span>-&gt;setContentView(I)V</span><br><span class="line"><span class="keyword">  .line</span> 20</span><br><span class="line"> <span class="built_in"> return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在实现里先是调用了父类的方法，然后再调用setContentView，注意这里给了一个传参。整形的传参，这个值是先赋给寄存器v0，然后再调用的使用传递进去的。smali中都是这么使用，所有的值必须通过寄存器来中转。这点和汇编很像。</li>
</ul>
<p><strong>文件头</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#类名为MainActivity</span></span><br><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">Lcom/fusijie/helloworld/MainActivity;</span>	</span><br><span class="line"><span class="comment">#父类名为Activity</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Landroid/app/Activity;</span></span><br><span class="line"><span class="comment">#源文件名称为MainActivity</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;MainActivity.java&quot;</span></span><br></pre></td></tr></table></figure>

<p>对比了Java代码和Smali代码，可以很清楚的看到，原本只有几行的代码到了Smali，内容被大大扩充了。Smali还原了Java隐藏的东西，同时显式地指定了很多细节。这还只是个最基本的HelloWorld的onCreate函数，如果有内部类，还会分文件显示。</p>
<h1 id="常量声明"><a href="#常量声明" class="headerlink" title="常量声明"></a>常量声明</h1><p>基本格式</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.field</span> 权限修饰符+静态修饰符+final+变量名;变量全类名路径;=常量值</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String a=<span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line">,super <span class="class">Ljava/lang/Object;</span></span><br><span class="line"><span class="keyword">.source</span> <span class="string">&quot;Test.java&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span><span class="keyword"> static</span><span class="keyword"> final</span> a:<span class="class">Ljava/lang/String;</span> = <span class="string">&quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="成员方法-函数声明"><a href="#成员方法-函数声明" class="headerlink" title="成员方法&#x2F;函数声明"></a>成员方法&#x2F;函数声明</h1><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span> 权限修饰符+静态修饰符+方法名(参数类型)返回值类型</span><br><span class="line"><span class="comment">#方法体</span><span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span><span class="comment">#注意方法结尾标志</span></span><br></pre></td></tr></table></figure>

<h2 id="无参-有参无返回"><a href="#无参-有参无返回" class="headerlink" title="无参&#x2F;有参无返回"></a><strong>无参&#x2F;有参无返回</strong></h2><p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//无参无返回</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getName</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//有参无返回</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getName</span><span class="params">(String a, <span class="type">int</span> b)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果是非静态 只需要将static去掉即可</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> getName()V</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"><span class="comment">#有参无返回</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> getName(<span class="class">Ljava/lang/String;</span>I)V</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="带参有返回值"><a href="#带参有返回值" class="headerlink" title="带参有返回值"></a><strong>带参有返回值</strong></h2><p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">(String p)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> getName(<span class="class">Ljava/lang/String;</span>)<span class="class">Ljava/lang/String;</span></span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">	return-object </span>v0<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="关于方法返回关键字"><a href="#关于方法返回关键字" class="headerlink" title="关于方法返回关键字"></a><strong>关于方法返回关键字</strong></h2><p><strong>主要有以下四种</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">return-void<span class="built_in"></span></span><br><span class="line"><span class="built_in">return-object</span></span><br><span class="line"><span class="built_in"></span>return</span><br><span class="line">return-wide</span><br></pre></td></tr></table></figure>

<p>数据类型对应关系表如下：</p>
<table>
<thead>
<tr>
<th align="center">smali方法返回关键字</th>
<th align="center">数据类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">return</td>
<td align="center">boolean</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">byte</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">short</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">char</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">int</td>
</tr>
<tr>
<td align="center">return-wide</td>
<td align="center">long (64 bits)</td>
</tr>
<tr>
<td align="center">return-wide</td>
<td align="center">double</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">float</td>
</tr>
<tr>
<td align="center">return-void</td>
<td align="center">void</td>
</tr>
<tr>
<td align="center">return-object</td>
<td align="center">数组</td>
</tr>
<tr>
<td align="center">return-object</td>
<td align="center">object</td>
</tr>
</tbody></table>
<h1 id="构造方法-构造函数声明"><a href="#构造方法-构造函数声明" class="headerlink" title="构造方法&#x2F;构造函数声明"></a>构造方法&#x2F;构造函数声明</h1><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span> 权限修饰符+constructor &lt;init&gt;(参数类型)返回值类型</span><br><span class="line"><span class="comment">#方法体</span><span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line">	<span class="comment">#调用父类构造方法</span></span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;,<span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line"><span class="built_in">	return-viod</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h1 id="静态代码块声明"><a href="#静态代码块声明" class="headerlink" title="静态代码块声明"></a>静态代码块声明</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.method static +constructor &lt;clinit&gt;()V</span><br><span class="line">#方法体</span><br><span class="line">.end method</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;	</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;clinit&gt;()V</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-viod</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>



<h1 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h1><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a><strong>关键字</strong></h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">invoke-virtual	<span class="comment">#用于非私有实例方法的调用</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-direct	</span><span class="comment">#用于构造方法以及私有方法的调用</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-static	</span><span class="comment">#调用静态方法</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-super	</span><span class="comment">#调用父类方法</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-interface	</span><span class="comment">#调用接口方法</span></span><br></pre></td></tr></table></figure>

<h2 id="非私有实例方法的调用"><a href="#非私有实例方法的调用" class="headerlink" title="非私有实例方法的调用"></a><strong>非私有实例方法的调用</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-virtual &#123;参数&#125;,方法所属类名;-&gt;方法名(参数类型)返回值类型</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//构造方法</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getName();</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//成员方法</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line">	</span><br><span class="line">	<span class="comment">#p0指代的是this.Ljava/lang/String;从0开始数是第0个参数,类似于本地变量表</span></span><br><span class="line">	<span class="comment">#调用父类构造方法</span></span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line">	<span class="comment">#调用普通成员getName方法</span></span><br><span class="line"><span class="built_in">	invoke-virtual </span>&#123;p0&#125;, <span class="class">LTest;</span>-&gt;getName()<span class="class">Ljava/lang/String;</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> getName()<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">#定义局部字符串常量</span></span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;hello&quot;</span></span><br><span class="line">	<span class="comment">#返回常量</span></span><br><span class="line">	retrun-object v<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="私有方法或者构造方法的调用"><a href="#私有方法或者构造方法的调用" class="headerlink" title="私有方法或者构造方法的调用"></a><strong>私有方法或者构造方法的调用</strong></h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-direct &#123;参数&#125;, 方法所属类名;-&gt;方法名(参数类型)返回值类型;</span><br></pre></td></tr></table></figure>

<h3 id="私有方法调用："><a href="#私有方法调用：" class="headerlink" title="私有方法调用："></a>私有方法调用：</h3><p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        getName();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//私有方法</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.class public LTest;</span><br><span class="line">.super Ljava/lang/Object;</span><br><span class="line"></span><br><span class="line">.method public constructor &lt;init&gt;(Ljava/lang/Stirng;)V</span><br><span class="line">	invoke-direct &#123;p0&#125;, Ljava/lang/Object;-&gt;&lt;init&gt;()V</span><br><span class="line">	#如果方法是私有的就得使用direct</span><br><span class="line">	invoke-direct &#123;p0&#125;,LTest;-&gt;getName()Ljava/lang/String;</span><br><span class="line">	</span><br><span class="line">	return-void</span><br><span class="line">.end method</span><br><span class="line"></span><br><span class="line">.method private getName()Ljava/lang/String;</span><br><span class="line"></span><br><span class="line">	#定义局部字符串常量</span><br><span class="line">	const-string v0,&quot;hello&quot;</span><br><span class="line">	#返回常量</span><br><span class="line">	retrun-object v</span><br><span class="line">	</span><br><span class="line">.end method</span><br></pre></td></tr></table></figure>

<h3 id="构造方法的调用"><a href="#构造方法的调用" class="headerlink" title="构造方法的调用"></a><strong>构造方法的调用</strong></h3><p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Test2</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Test2</span><span class="params">(String a)</span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#匿名内部类的声明</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;-&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#构造方法</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line">	<span class="comment">#初始化父类的构造方法</span></span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line">	<span class="comment">#</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-viod</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h3 id="静态方法的调用并获取返回值"><a href="#静态方法的调用并获取返回值" class="headerlink" title="静态方法的调用并获取返回值"></a><strong>静态方法的调用并获取返回值</strong></h3><p>（不区分私有共有 静态优先）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-direct &#123;参数&#125;, 方法所属类名;-&gt;方法名(参数类型)返回值类型;</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> getName();</span><br><span class="line">        System.out.print(b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/Stirng;</span>)V</span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line">	<span class="comment">#大括号内没有p0因为静态函数的嗲哟个不需要传入this实例</span></span><br><span class="line"><span class="built_in">	invoke-static </span>&#123;&#125;,<span class="class">LTest;</span>-&gt;getName()<span class="class">Ljava/lang/String;</span></span><br><span class="line">	<span class="comment">#将返回值赋给v0</span></span><br><span class="line"><span class="built_in">	move-result-object </span>v0</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> private</span> getName()<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">#定义局部字符串常量</span></span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;hello&quot;</span></span><br><span class="line">	<span class="comment">#返回常量</span></span><br><span class="line">	retrun-object v<span class="keyword"></span></span><br><span class="line"><span class="keyword">	</span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h3 id="父类成员的方法调用"><a href="#父类成员的方法调用" class="headerlink" title="父类成员的方法调用"></a>父类成员的方法调用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-super &#123;参数&#125;, 方法所属类名;-&gt;方法名(参数类型)返回值类型;</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle saveInstanceState)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(saveIntanceState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> protected</span> onCreate(<span class="class">Landroid/os/Bundle;</span>)V</span><br><span class="line">	.registers 2</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	invoke-super </span>&#123;p0,p1&#125;,<span class="class">Landroid/app/Activity;</span>-&gt;onCreate(android/os/Bundle;)V</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h3 id="接口的调用"><a href="#接口的调用" class="headerlink" title="接口的调用"></a>接口的调用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-interface &#123;参数&#125;, 方法所属类名;-&gt;方法名(参数类型)返回值类型;</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">InterTest</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test2</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAa</span><span class="params">()</span>&#123;</span><br><span class="line">        InterTest aa=a;</span><br><span class="line">        #调用接口方法</span><br><span class="line">        aa.est2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> <span class="keyword">implements</span> <span class="title class_">InterTest</span></span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Test2</span><span class="params">()</span>&#123;&#125; </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">est2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Interface InterTest</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">est2</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span> pulic<span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/Object;</span>)V</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line"><span class="built_in">	invoke-static </span>&#123;p0&#125;, <span class="class">LTest;</span>-&gt;getName()<span class="class">Ljava/lang/String;</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end </span>,method </span><br><span class="line"></span><br><span class="line"><span class="comment">#声明setAagetment方法</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> setAa()V</span><br><span class="line">	.registers 2</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	iget-object </span>v0, p0,<span class="class">LTest;</span>-&gt;a:<span class="class">LTest$InterTest;</span></span><br><span class="line">	<span class="comment">#调用接口方法</span></span><br><span class="line"><span class="built_in">	invoke-interface </span>&#123;v0&#125;,<span class="class">LTest$InterTest;</span>-&gt;est2()V</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span>	</span><br></pre></td></tr></table></figure>

<h1 id="对象的创建方式"><a href="#对象的创建方式" class="headerlink" title="对象的创建方式"></a>对象的创建方式</h1><p>对象的创建分多步进行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#声明实例</span><br><span class="line">new-instance +变量名, 对象全包名路径;</span><br><span class="line"></span><br><span class="line">#调用构造方法（如果构造方法内还定义了成员变量，那么在调用之前要提前声明，然后invoke的时候当作参数一并传入）</span><br><span class="line">invoke-direct &#123;变量名&#125;, 对象全包路径;-&gt;&lt;init&gt;(参数)返回类型</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Test</span>();</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new-instance v0, <span class="class">LTest;</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">invoke-direct </span>&#123;v0&#125;, <span class="class">LTest;</span>-&gt;&lt;init&gt;()V</span><br></pre></td></tr></table></figure>

<h1 id="数据的定义"><a href="#数据的定义" class="headerlink" title="数据的定义"></a>数据的定义</h1><h2 id="字符串数据"><a href="#字符串数据" class="headerlink" title="字符串数据"></a>字符串数据</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义字符串 将字符串hello赋值给v0</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">const-string </span>v0, <span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure>

<p>返回以一个字符串“hello”，有两种方式，smali只能使用第二种。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#直接返回</span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">static</span> String <span class="title function_">getHello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">#声明一个容器赋值再返回容器</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">gerHello</span><span class="params">()</span>&#123;</span><br><span class="line">    String a=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> String getHello()<span class="class">Ljava/lang/String;</span></span><br><span class="line">	<span class="comment">#如果没有static那就是对象方法，参数默认有个this，对应的是p0容器，那么registers就是2</span></span><br><span class="line">	<span class="comment">#如果有static那就是静态方法，就没有this，呢么就只需要v0一个寄存器，registers就是1</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">#使用到寄存器的个数</span></span><br><span class="line">	.registers 1</span><br><span class="line">	<span class="comment">#const-string来定义字符串 v0是寄存器</span></span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;hello&quot;</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-object </span>v0<span class="keyword"></span></span><br><span class="line"><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="字节码数据"><a href="#字节码数据" class="headerlink" title="字节码数据"></a>字节码数据</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义字节码对象 将GO Activity，class对象赋值给v0</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">const-calss </span>v0, <span class="class">LGOActivity;</span></span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,GoActivity.class))</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTestActivity;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Landroid/app/Activity;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> jump()V</span><br><span class="line"><span class="keyword">.registers</span> 3</span><br><span class="line"></span><br><span class="line"><span class="comment">#其实就是java的拆解形式 由内到外拆解编写</span></span><br><span class="line"><span class="comment">#第一步 声明class对象以及当前Acticity this对象</span></span><br><span class="line">const.class v0，<span class="class">LGoActicity;</span></span><br><span class="line"><span class="comment">#第二步 创建Intent对象</span></span><br><span class="line">	<span class="comment">#new-intance</span></span><br><span class="line"><span class="built_in">	new-intance </span>v1,<span class="class">Landroid/comtent/Intent;</span></span><br><span class="line">	<span class="comment">#构造方法的调用</span></span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;v1,p0,v0&#125;, <span class="class">Landroid/content/Intent;</span>-&gt;&lt;init&gt;(<span class="class">Landroid/app/Activity;</span><span class="class">Ljava/lang/Class;</span>)</span><br><span class="line"><span class="comment">#第三步调用startActivity方法</span></span><br><span class="line"><span class="built_in">	invoke-virtual </span>&#123;p0,v1&#125;, <span class="class">LTestActivity;</span>-&gt;startActivity(<span class="class">Landroid/content/Intent;</span>)V</span><br><span class="line">	<span class="built_in"></span></span><br><span class="line"><span class="built_in">return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>



<h2 id="数值类型数据"><a href="#数值类型数据" class="headerlink" title="数值类型数据"></a>数值类型数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">分为两类</span><br><span class="line"></span><br><span class="line">第一种 const开头  占用一个寄存器（32位/容器）</span><br><span class="line">const v0,30</span><br><span class="line">	* const/4	最大值允许存放四位数值（四个二进制位）1111第一个数值是符号位 所以取值范围是-8到7	</span><br><span class="line">	* const/16	最大只允许存放16位数值 第一位默认为符号位 所以计算后5位的数值</span><br><span class="line">	* const 32位 最大32位</span><br><span class="line">	* const/high16	只存放高4位的数据</span><br><span class="line">	</span><br><span class="line">第二种 const-wide 开头  占用两个寄存器（64位）</span><br><span class="line">const-wide v0,30#占用v0和v1</span><br><span class="line">    * const-wide/16	定义两个相连容器 最大只允许存放16位数据</span><br><span class="line">    * const-wide/32 定义两个相连容器 最大值允许存放32位数据</span><br><span class="line">    * const-wide 定义两个相连容器 最大值允许存放64位数据</span><br><span class="line">    * const-wide/high16 定义两个相连容器 只允许存放高16位数据</span><br></pre></td></tr></table></figure>

<h3 id="数据取值范围算法"><a href="#数据取值范围算法" class="headerlink" title="数据取值范围算法"></a>数据取值范围算法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1000 ➡ -8</span><br><span class="line">1001 ➡ -7</span><br><span class="line">1010 ➡ -6</span><br><span class="line">1011 ➡ -5</span><br><span class="line">1100 ➡ -4</span><br><span class="line">1101 ➡ -3</span><br><span class="line">1110 ➡ -2</span><br><span class="line">1111 ➡ -1</span><br><span class="line"></span><br><span class="line">0000 ➡ 0</span><br><span class="line">0001 ➡ 1</span><br><span class="line">0010 ➡ 2</span><br><span class="line">0011 ➡ 3</span><br><span class="line">0100 ➡ 4</span><br><span class="line">0101 ➡ 5</span><br><span class="line">0110 ➡ 6</span><br><span class="line">0111 ➡ 7</span><br></pre></td></tr></table></figure>

<p>算法：正数的符号是0，负数的符号是1，正数的反码、补码与原码一样，负数的反码是让符号位不变，数据按位取反；补码是将反码加1.</p>
<hr>
<h1 id="字段取值赋值"><a href="#字段取值赋值" class="headerlink" title="字段取值赋值"></a>字段取值赋值</h1><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iget<span class="built_in"> iput </span>sget<span class="built_in"> sput </span>instance<span class="keyword"> static</span></span><br></pre></td></tr></table></figure>

<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.field</span></span><br><span class="line">	<span class="comment">#取值前缀</span></span><br><span class="line">	get</span><br><span class="line">		iget<span class="comment">#实例 i指的是instance</span></span><br><span class="line">		sget<span class="comment">#静态 s指的是static</span></span><br><span class="line">	<span class="comment">#赋值前缀</span></span><br><span class="line">	put</span><br><span class="line">		iput<span class="comment">#实例 i指的是instance</span></span><br><span class="line">		sput<span class="comment">#静态 s指的是static</span></span><br></pre></td></tr></table></figure>

<h2 id="静态字段赋值"><a href="#静态字段赋值" class="headerlink" title="静态字段赋值"></a>静态字段赋值</h2><p>分多步进行 关键代码：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sput-object</span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">string</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTestActivity;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Landroid/app/Activity;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#声明静态字段</span></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span><span class="keyword"> static</span> a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#类初始化方法 被jvm执行 优先于构造方法</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> static</span><span class="keyword"> constructor</span> &lt;clinit&gt;()V</span><br><span class="line"></span><br><span class="line"><span class="built_in">	const-string </span>v0, <span class="string">&quot;hello&quot;</span><span class="comment">#定义常量值</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	sput-object </span>v0, <span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span><span class="comment">#常量赋值</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="静态字段取值"><a href="#静态字段取值" class="headerlink" title="静态字段取值"></a>静态字段取值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sget-object </span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getA</span><span class="params">()</span>&#123;</span><br><span class="line">        String aa=a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#声明静态字段</span></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span><span class="keyword"> static</span> a:<span class="class">Ljava/lang/Strig;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#类初始化方法 被jvm执行 优先于构造方法</span></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> static</span><span class="keyword"> constructor</span> &lt;clinit&gt;()V</span><br><span class="line"><span class="built_in">	const-string </span>v0, <span class="string">&quot;hello&quot;</span><span class="comment">#定义常量值	</span></span><br><span class="line"><span class="built_in">	sget-object </span>v0,<span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/Strin;</span><span class="comment">#常量赋值	</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> getA()V</span><br><span class="line">	.registers 2</span><br><span class="line">	</span><br><span class="line">	<span class="comment">#静态字段取值</span></span><br><span class="line"><span class="built_in">	sget-object </span>v0, <span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="实例字段赋值"><a href="#实例字段赋值" class="headerlink" title="实例字段赋值"></a>实例字段赋值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iput-object </span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> calss Test</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;b&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAa</span><span class="params">()</span>&#123;</span><br><span class="line">        a = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span> a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line">	.register 3</span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line"><span class="built_in">	const-string </span>v0, <span class="string">&quot;g&quot;</span></span><br><span class="line"><span class="built_in">	iput-object </span>v0,p0,<span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> setAa()V</span><br><span class="line">	.registers 2</span><br><span class="line"><span class="built_in">	iput-object </span>v0,<span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line">	</span><br></pre></td></tr></table></figure>



<h2 id="实例字段取值"><a href="#实例字段取值" class="headerlink" title="实例字段取值"></a>实例字段取值</h2><p><strong>关键代码：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iget-object </span><br></pre></td></tr></table></figure>

<p>如下java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> calss Test</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getA</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">aa</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用smali代码表示：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LTest;</span></span><br><span class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.field</span><span class="keyword"> private</span> a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> constructor</span> &lt;init&gt;(<span class="class">Ljava/lang/String;</span>)V</span><br><span class="line">	.register 3</span><br><span class="line">	.prologue</span><br><span class="line"><span class="built_in">	invoke-direct </span>&#123;p0&#125;, <span class="class">Ljava/lang/Object;</span>-&gt;&lt;init&gt;()V</span><br><span class="line"><span class="built_in">	const-string </span>v0, <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">	iput-object </span>v0,p0,<span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> setAa()V</span><br><span class="line">	.registers 2</span><br><span class="line">	.prologue</span><br><span class="line"><span class="built_in">	const-string </span>v0, <span class="string">&quot;b&quot;</span></span><br><span class="line"><span class="built_in">	iput-object </span>v0,p0,<span class="class">LTest;</span>-&gt;a:<span class="class">Ljava/lang/String;</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p><strong>以实例变量举例：</strong></p>
<table>
<thead>
<tr>
<th align="center">smali取值复制和值定义关键字</th>
<th>java</th>
</tr>
</thead>
<tbody><tr>
<td align="center">iget-byte<br />iput-byte<br />const&#x2F;4</td>
<td>byte</td>
</tr>
<tr>
<td align="center">iget-short<br />iput-short<br />const&#x2F;4</td>
<td>short</td>
</tr>
<tr>
<td align="center">iget<br />iput<br />const&#x2F;4</td>
<td>int</td>
</tr>
<tr>
<td align="center">iget-wide<br />iput-wide<br />const-wide&#x2F;16</td>
<td>long</td>
</tr>
<tr>
<td align="center">iget<br />iput<br />const&#x2F;high16</td>
<td>float</td>
</tr>
<tr>
<td align="center">iget-char<br />iput-char<br />const&#x2F;16</td>
<td>char</td>
</tr>
<tr>
<td align="center">iget-wide<br />iput-wide<br />const&#x2F;high16</td>
<td>double</td>
</tr>
<tr>
<td align="center">iget-boolean<br />iput-boolean<br />const&#x2F;4</td>
<td>boolean</td>
</tr>
</tbody></table>
<h1 id="逻辑语句之条件跳转分支"><a href="#逻辑语句之条件跳转分支" class="headerlink" title="逻辑语句之条件跳转分支"></a>逻辑语句之条件跳转分支</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&quot;if-eq vA, vB, :cond_**&quot; 如果vA等于vB则跳转到：cond_** #equal</span><br><span class="line">&quot;if-ne vA, vB, :cond_**&quot; 如果vA不等于vB则跳转到：cond_** # not equal</span><br><span class="line">&quot;if-lt vA,vB, :cond_**&quot; 如果vA小于vB则跳转到：cond_** #less than</span><br><span class="line">&quot;if-ge vA,vB, :cond_**&quot; 如果vA大于等于vB则跳转到：cond_** #greater equal</span><br><span class="line">&quot;if-gt vA,vB, :cond_**&quot; 如果vA大于vB则跳转到：cond_** #greater than</span><br><span class="line">&quot;if-le vA,vB, :cond_**&quot; 如果vA小于等于vB则跳转到：cond_** #less equal</span><br><span class="line"></span><br><span class="line">&quot;if-eqz vA, :cond_**&quot; 如果vA等于0则跳转到：cond_** #zero</span><br><span class="line">&quot;if-nez vA, :cond_**&quot; 如果vA不等于0则跳转到：cond_** </span><br><span class="line">&quot;if-ltz vA, :cond_**&quot; 如果vA小于0则跳转到：cond_** </span><br><span class="line">&quot;if-gez vA, :cond_**&quot; 如果vA大于等于0则跳转到：cond_** </span><br><span class="line">&quot;if-gtz vA, :cond_**&quot; 如果vA大于0则跳转到：cond_** </span><br><span class="line">&quot;if-lez vA, :cond_**&quot; 如果vA小于等于0则跳转到：cond_** </span><br></pre></td></tr></table></figure>

<h1 id="方法内部寄存器声明"><a href="#方法内部寄存器声明" class="headerlink" title="方法内部寄存器声明"></a>方法内部寄存器声明</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>对于dalviks字节码寄存器<strong>都是32位</strong>的，它能够表示任何类型，2个寄存器用于表示64位的类型（Long and Double）</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>声明于方法内部<strong>（必须）</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> getName()V</span><br><span class="line">	.registers 6</span><br><span class="line">	</span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<h2 id="registers-和-locals的基本区别"><a href="#registers-和-locals的基本区别" class="headerlink" title=".registers 和.locals的基本区别"></a>.registers 和.locals的基本区别</h2><p>在一个方法（method）中有两个方式指定有多少个可用的寄存器。指令.gisters指令制定了在这个方法中有多少个可用的寄存器。（表示局部+参数）</p>
<p>指令.lacals指明了在这个方法中非参（non-parameter）寄存器的数量。人儿寄存器的总数也包括保存方法参数的寄存器。</p>
<p>例如：</p>
<p>.registers指令指定5个，或者使用.local指令指定2个（2个local寄存器+3个参数寄存器）</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> callMe(II)V</span><br><span class="line">	.registers 5</span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="built_in">	const-string </span>v1,<span class="string">&quot;1&quot;</span></span><br><span class="line">	<span class="comment">#v命令法 v3==&gt;p0(this)	v4==&gt;p1(Int)		v5==&gt;p2(Int)</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br><span class="line">或者</span><br><span class="line"><span class="keyword">.method</span><span class="keyword"> public</span> callMe(II)V</span><br><span class="line">	.locals 2</span><br><span class="line"><span class="built_in">	const-string </span>v0,<span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="built_in">	const-string </span>v1,<span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="built_in">	return-void</span></span><br><span class="line"><span class="built_in"></span><span class="keyword">.end method</span></span><br></pre></td></tr></table></figure>

<p>该方法被调用的死后，调用方法的对象（即this的引用）会被保存在v2，第一个参数在v3中，第二个参数在v4中。</p>
<p><strong>如果是静态方法，那么参数少了对象引用，除此之外和非静态原理相同，registers为4，locals依然为2。</strong></p>
<h1 id="smali语法关键字"><a href="#smali语法关键字" class="headerlink" title="smali语法关键字"></a>smali语法关键字</h1><h2 id="lin-N"><a href="#lin-N" class="headerlink" title=".lin N"></a>.lin N</h2><p>表示于java源文件代码的映射关系，比如：</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">.line</span> 3 <span class="comment">#代表以下代码还原成java代码在源文件第三行</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">const/4 </span>v0,0x1</span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">iput </span>v0, p0,<span class="class">LTest;</span>-&gt;a:I</span><br></pre></td></tr></table></figure>

<p><strong>删除该关键字不影响程序执行，该关键字在反编译是能很好的帮助我们阅读smali代码，以该关键字当代码块的分割线，方便快速阅读执行内容。</strong></p>
<h2 id="cond-0"><a href="#cond-0" class="headerlink" title=":cond_0"></a>:cond_0</h2><p>条件分支，配合if使用</p>
<h2 id="proligue"><a href="#proligue" class="headerlink" title=".proligue"></a>.proligue</h2><p>表示程序的开始，可省略</p>
<h2 id="goto-0"><a href="#goto-0" class="headerlink" title=":goto_0"></a>:goto_0</h2><p>goto跳转分支，配合goto关键字使用</p>
<h2 id="local"><a href="#local" class="headerlink" title=".local"></a>.local</h2><p>显示局部变量别名信息，作用等同于.line</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">move-result-object v0 #调用方法后结果存储在v0中</span><br><span class="line">.local v0,&quot;b&quot;:Ljava/lang/String; #局部便零v0别名为b 是一个string类型 也就是String b=v0</span><br></pre></td></tr></table></figure>

<h2 id="locals-N"><a href="#locals-N" class="headerlink" title=".locals N"></a>.locals N</h2><p>注意这个和上面loca的区别多加了一个s</p>
<table>
<thead>
<tr>
<th>Opcode操作码(hex)</th>
<th>Opcode name操作码名称</th>
<th>Explanation说明</th>
<th>Example示例</th>
</tr>
</thead>
<tbody><tr>
<td>00</td>
<td>nop</td>
<td>无操作</td>
<td>0000 – nop</td>
</tr>
<tr>
<td>01</td>
<td>move vx, vy</td>
<td>移动vy的内容到vx。两个寄存器都必须在最初的256寄存器范围以内。</td>
<td>0110 – move v0, v1 移动v1寄存器中的内容到v0。</td>
</tr>
<tr>
<td>02</td>
<td>move&#x2F;from16 vx, vy</td>
<td>移动vy的内容到vx。vy可能在64K寄存器范围以内，而vx则是在最初的256寄存器范围以内。</td>
<td>0200 1900 – move&#x2F;from16 v0, v25 移动v25寄存器中的内容到v0。</td>
</tr>
<tr>
<td>03</td>
<td>move&#x2F;16</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>04</td>
<td>move-wide</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>05</td>
<td>move-wide&#x2F;from16 vx, vy</td>
<td>移动一个long&#x2F;double值，从vy到vx。vy可能在64K寄存器范围以内，而vx则是在最初的256寄存器范围以内。</td>
<td>0516 0000 – move-wide&#x2F;from16 v22, v0 移动v0,v1寄存器中的内容到 v22,v23。</td>
</tr>
<tr>
<td>06</td>
<td>move-wide&#x2F;16</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>07</td>
<td>move-object vx, vy</td>
<td>移动对象引用，从vy到vx。</td>
<td>0781 – move-object v1, v8 移动v8寄存器中的对象引用到v1。</td>
</tr>
<tr>
<td>08</td>
<td>move-object&#x2F;from16 vx, vy</td>
<td>移动对象引用，从vy到vx。vy可以处理64K寄存器地址，vx可以处理256寄存器地址。</td>
<td>0801 1500 – move-object&#x2F;from16 v1, v21 移动v21寄存器中的对象引用到v1。</td>
</tr>
<tr>
<td>09</td>
<td>move-object&#x2F;16</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>0A</td>
<td>move-result vx</td>
<td>移动上一次方法调用的返回值到vx。</td>
<td>0A00 – move-result v0 移动上一次方法调用的返回值到v0。</td>
</tr>
<tr>
<td>0B</td>
<td>move-result-wide vx</td>
<td>移动上一次方法调用的long&#x2F;double型返回值到vx,vx+1。</td>
<td>0B02 – move-result-wide v2 移动上一次方法调用的long&#x2F;double型返回值到v2,v3。</td>
</tr>
<tr>
<td>0C</td>
<td>move-result-object vx</td>
<td>移动上一次方法调用的对象引用返回值到vx。</td>
<td>0C00 – move-result-object v0 移动上一次方法调用的对象引用返回值到v0。</td>
</tr>
<tr>
<td>0D</td>
<td>move-exception vx</td>
<td>当方法调用抛出异常时移动异常对象引用到vx。</td>
<td>0D19 – move-exception v25 当方法调用抛出异常时移动异常对象引用到v25。</td>
</tr>
<tr>
<td>0E</td>
<td>return-void</td>
<td>返回空值。</td>
<td>0E00 – return-void 返回值为void，即无返回值，并非返回null。</td>
</tr>
<tr>
<td>0F</td>
<td>return vx</td>
<td>返回在vx寄存器的值。</td>
<td>0F00 – return v0 返回v0寄存器中的值。</td>
</tr>
<tr>
<td>10</td>
<td>return-wide vx</td>
<td>返回在vx,vx+1寄存器的double&#x2F;long值。</td>
<td>1000 – return-wide v0 返回v0,v1寄存器中的double&#x2F;long值。</td>
</tr>
<tr>
<td>11</td>
<td>return-object vx</td>
<td>返回在vx寄存器的对象引用。</td>
<td>1100 – return-object v0 返回v0寄存器中的对象引用。</td>
</tr>
<tr>
<td>12</td>
<td>const&#x2F;4 vx, lit4</td>
<td>存入4位常量到vx。</td>
<td>1221 – const&#x2F;4 v1, #int 2 存入int型常量2到v1。目的寄存器在第二个字节的低4位，常量2在更高的4位。</td>
</tr>
<tr>
<td>13</td>
<td>const&#x2F;16 vx, lit16</td>
<td>存入16位常量到vx。</td>
<td>1300 0A00 – const&#x2F;16 v0, #int 10 存入int型常量10到v0。</td>
</tr>
<tr>
<td>14</td>
<td>const vx, lit32</td>
<td>存入int 型常量到vx。</td>
<td>1400 4E61 BC00 – const v0, #12345678 &#x2F;&#x2F; #00BC614E 存入常量12345678到v0。</td>
</tr>
<tr>
<td>15</td>
<td>const&#x2F;high16 v0, lit16</td>
<td>存入16位常量到最高位寄存器，用于初始化float值。</td>
<td>1500 2041 – const&#x2F;high16 v0, #float 10.0 &#x2F;&#x2F; #41200000 存入float常量10.0到v0。该指令最高支持16位浮点数。</td>
</tr>
<tr>
<td>16</td>
<td>const-wide&#x2F;16 vx, lit16</td>
<td>存入int常量到vx,vx+1寄存器，扩展int型常量为long常量。</td>
<td>1600 0A00 – const-wide&#x2F;16 v0, #long 10 存入long常量10到v0,v1寄存器。</td>
</tr>
<tr>
<td>17</td>
<td>const-wide&#x2F;32 vx, lit32</td>
<td>存入32位常量到vx,vx+1寄存器，扩展int型常量到long常量。</td>
<td>1702 4e61 bc00 – const-wide&#x2F;32 v2, #long 12345678 &#x2F;&#x2F; #00bc614e 存入long常量12345678到v2,v3寄存器。</td>
</tr>
<tr>
<td>18</td>
<td>const-wide vx, lit64</td>
<td>存入64位常量到vx,vx+1寄存器。</td>
<td>1802 874b 6b5d 54dc 2b00- const-wide v2, #long 12345678901234567 &#x2F;&#x2F; #002bdc545d6b4b87 存入long常量12345678901234567到v2,v3寄存器。</td>
</tr>
<tr>
<td>19</td>
<td>const-wide&#x2F;high16 vx, lit16</td>
<td>存入16位常量到最高16位的vx,vx+1寄存器，用于初始化double 值。</td>
<td>1900 2440 – const-wide&#x2F;high16 v0, #double 10.0 &#x2F;&#x2F; #402400000 存入double常量10.0到v0,v1。</td>
</tr>
<tr>
<td>1A</td>
<td>const-string vx, 字符串ID</td>
<td>存入字符串常量引用到vx，通过字符串ID或字符串。</td>
<td>1A08 0000 – const-string v8, “” &#x2F;&#x2F; string@0000 存入string@0000（字符串表#0条目）的引用到v8。</td>
</tr>
<tr>
<td>1B</td>
<td>const-string-jumbo</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>1C</td>
<td>const-class vx, 类型ID</td>
<td>存入类对象常量到vx，通过类型ID或类型（如Object.class）。</td>
<td>1C00 0100 – const-class v0, Test3 &#x2F;&#x2F; type@0001 存入Test3.class（类型ID表#1条目）的引用到v0。</td>
</tr>
<tr>
<td>1D</td>
<td>monitor-enter vx</td>
<td>获得vx寄存器中的对象引用的监视器。</td>
<td>1D03 – monitor-enter v3 获得v3寄存器中的对象引用的监视器。</td>
</tr>
<tr>
<td>1E</td>
<td>monitor-exit</td>
<td>释放vx寄存器中的对象引用的监视器。</td>
<td>1E03 – monitor-exit v3 释放v3寄存器中的对象引用的监视器。</td>
</tr>
<tr>
<td>1F</td>
<td>check-cast vx, 类型ID</td>
<td>检查vx寄存器中的对象引用是否可以转换成类型ID对应类型的实例。如不可转换，抛出ClassCastException异常，否则继续执行。</td>
<td>1F04 0100 – check-cast v4, Test3 &#x2F;&#x2F; type@0001 检查v4寄存器中的对象引用是否可以转换成Test3（类型ID表#1条目）的实例。</td>
</tr>
<tr>
<td>20</td>
<td>instance-of vx, vy, 类型ID</td>
<td>检查vy寄存器中的对象引用是否是类型ID对应类型的实例，如果是，vx存入非0值，否则vx存入0。</td>
<td>2040 0100 – instance-of v0, v4, Test3 &#x2F;&#x2F; type@0001 检查v4寄存器中的对象引用是否是Test3（类型ID表#1条目）的实例。如果是，v0存入非0值，否则v0存入0。</td>
</tr>
<tr>
<td>21</td>
<td>array-length vx, vy</td>
<td>计算vy寄存器中数组引用的元素长度并将长度存入vx。</td>
<td>2111 – array-length v0, v1 计算v1寄存器中数组引用的元素长度并将长度存入v0。</td>
</tr>
<tr>
<td>22</td>
<td>new-instance vx, 类型ID</td>
<td>根据类型ID或类型新建一个对象实例，并将新建的对象的引用存入vx。</td>
<td>2200 1500 – new-instance v0, java.io.FileInputStream &#x2F;&#x2F; type@0015 实例化java.io.FileInputStream（类型ID表#15H条目）类型，并将其对象引用存入v0。</td>
</tr>
<tr>
<td>23</td>
<td>new-array vx, vy, 类型ID</td>
<td>根据类型ID或类型新建一个数组，vy存入数组的长度，vx存入数组的引用。</td>
<td>2312 2500 – new-array v2, v1, char[] &#x2F;&#x2F; type@0025 新建一个char（类型ID表#25H条目）数组，v1存入数组的长度，v2存入数组的引用。</td>
</tr>
<tr>
<td>24</td>
<td>filled-new-array {参数}, 类型ID</td>
<td>根据类型ID或类型新建一个数组并通过参数填充注5。新的数组引用可以得到一个move-result-object指令，前提是执行过filled-new-array 指令。</td>
<td>2420 530D 0000 – filled-new-array {v0,v0},[I &#x2F;&#x2F; type@0D53 新建一个int（类型ID表#D53H条目）数组，长度将为2并且2个元素将填充到v0寄存器。</td>
</tr>
<tr>
<td>25</td>
<td>filled-new-array-range {vx..vy}, 类型ID</td>
<td>根据类型ID或类型新建一个数组并以寄存器范围为参数填充。新的数组引用可以得到一个move-result-object指令，前提是执行过filled-new-array 指令。</td>
<td>2503 0600 1300 - filled-new-array&#x2F;range {v19..v21}, [B &#x2F;&#x2F; type@0006 新建一个byte（类型ID表#6条目）数组，长度将为3并且3个元素将填充到v19,v20,v21寄存器注4。</td>
</tr>
<tr>
<td>26</td>
<td>fill-array-data vx, 偏移量</td>
<td>用vx的静态数据填充数组引用。静态数据的位址是当前指令位置加偏移量的和。</td>
<td>2606 2500 0000 - fill-array-data v6, 00e6 &#x2F;&#x2F; +0025 用当前指令位置+25H的静态数据填充v6寄存器的数组引用。偏移量是32位的数字，静态数据的存储格式如下：0003 &#x2F;&#x2F; 表类型：静态数组数据0400 &#x2F;&#x2F; 每个元素的字节数（这个例子是4字节的int型）0300 0000 &#x2F;&#x2F; 元素个数0100 0000 &#x2F;&#x2F; 元素 #0：int 10200 0000 &#x2F;&#x2F; 元素 #1：int 20300 0000 &#x2F;&#x2F; 元素 #2：int 3</td>
</tr>
<tr>
<td>27</td>
<td>throw vx</td>
<td>抛出异常对象，异常对象的引用在vx寄存器。</td>
<td>2700 - throw v0 抛出异常对象，异常对象的引用在v0寄存器。</td>
</tr>
<tr>
<td>28</td>
<td>goto 目标</td>
<td>通过短偏移量注2无条件跳转到目标。</td>
<td>28F0 - goto 0005 &#x2F;&#x2F; -0010 跳转到当前位置-16（hex 10）的位置，0005是目标指令标签。</td>
</tr>
<tr>
<td>29</td>
<td>goto&#x2F;16目标</td>
<td>通过16位偏移量注2无条件跳转到目标。</td>
<td>2900 0FFE - goto&#x2F;16 002f &#x2F;&#x2F; -01f1 跳转到当前位置-1F1H的位置，002f是目标指令标签。</td>
</tr>
<tr>
<td>2A</td>
<td>goto&#x2F;32目标</td>
<td>通过32位偏移量注2无条件跳转到目标。</td>
<td></td>
</tr>
<tr>
<td>2B</td>
<td>packed-switch vx, 索引表偏移量</td>
<td>实现一个switch 语句，case常量是连续的。这个指令使用索引表，vx是在表中找到具体case的指令偏移量的索引，如果无法在表中找到vx对应的索引将继续执行下一个指令（即default case）。</td>
<td>2B02 0C00 0000 - packed-switch v2, 000c &#x2F;&#x2F; +000c 根据v2寄存器中的值执行packed switch，索引表的位置是当前指令位置+0CH，表如下所示：0001 &#x2F;&#x2F; 表类型：packed switch表0300 &#x2F;&#x2F; 元素个数0000 0000 &#x2F;&#x2F; 基础元素0500 0000 0: 00000005 &#x2F;&#x2F; case 0: +000000050700 0000 1: 00000007 &#x2F;&#x2F; case 1: +000000070900 0000 2: 00000009 &#x2F;&#x2F; case 2: +00000009</td>
</tr>
<tr>
<td>2C</td>
<td>sparse-switch vx, 查询表偏移量</td>
<td>实现一个switch 语句，case常量是非连续的。这个指令使用查询表，用于表示case常量和每个case常量的偏移量。如果vx无法在表中匹配将继续执行下一个指令（即default case）。</td>
<td>2C02 0c00 0000 - sparse-switch v2, 000c &#x2F;&#x2F; +000c 根据v2寄存器中的值执行sparse switch ，查询表的位置是当前指令位置+0CH，表如下所示：0002 &#x2F;&#x2F; 表类型：sparse switch表0300 &#x2F;&#x2F; 元素个数9cff ffff &#x2F;&#x2F; 第一个case常量: -100fa00 0000 &#x2F;&#x2F; 第二个case常量: 250e803 0000 &#x2F;&#x2F; 第三个case常量: 10000500 0000 &#x2F;&#x2F; 第一个case常量的偏移量: +50700 0000 &#x2F;&#x2F; 第二个case常量的偏移量: +70900 0000 &#x2F;&#x2F; 第三个case常量的偏移量: +9</td>
</tr>
<tr>
<td>2D</td>
<td>cmpl-float vx, vy, vz</td>
<td>比较vy和vz的float值并在vx存入int型返回值注3。</td>
<td>2D00 0607 - cmpl-float v0, v6, v7 比较v6和v7的float值并在v0存入int型返回值。非数值默认为小于。如果参数为非数值将返回-1。</td>
</tr>
<tr>
<td>2E</td>
<td>cmpg-float vx, vy, vz</td>
<td>比较vy和vz的float值并在vx存入int型返回值注3。</td>
<td>2E00 0607 - cmpg-float v0, v6, v7 比较v6和v7的float值并在v0存入int型返回值。非数值默认为大于。如果参数为非数值将返回1。</td>
</tr>
<tr>
<td>2F</td>
<td>cmpl-double vx, vy, vz</td>
<td>比较vy和vz注2的double值并在vx存入int型返回值注3。</td>
<td>2F19 0608 - cmpl-double v25, v6, v8 比较v6,v7和v8,v9的double值并在v25存入int型返回值。非数值默认为小于。如果参数为非数值将返回-1。</td>
</tr>
<tr>
<td>30</td>
<td>cmpg-double vx, vy, vz</td>
<td>比较vy和vz注2的double值并在vx存入int型返回值注3。</td>
<td>3000 080A - cmpg-double v0, v8, v10 比较v8,v9和v10,v11的double值并在v0存入int型返回值。非数值默认为大于。如果参数为非数值将返回1。</td>
</tr>
<tr>
<td>31</td>
<td>cmp-long vx, vy, vz</td>
<td>比较vy和vz的long值并在vx存入int型返回值注3。</td>
<td>3100 0204 - cmp-long v0, v2, v4 比较v2和v4的long值并在v0存入int型返回值。</td>
</tr>
<tr>
<td>32</td>
<td>if-eq vx,vy, 目标</td>
<td>如果vx &#x3D;&#x3D; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>32b3 6600 - if-eq v3, v11, 0080 &#x2F;&#x2F; +0066 如果v3 &#x3D;&#x3D; v11，跳转到当前位置+66H。0080是目标指令标签。</td>
</tr>
<tr>
<td>33</td>
<td>if-ne vx,vy, 目标</td>
<td>如果vx !&#x3D; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>33A3 1000 - if-ne v3, v10, 002c &#x2F;&#x2F; +0010 如果v3 !&#x3D; v10，跳转到当前位置+10H。002c是目标指令标签。</td>
</tr>
<tr>
<td>34</td>
<td>if-lt vx,vy, 目标</td>
<td>如果vx &lt; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>3432 CBFF - if-lt v2, v3, 0023 &#x2F;&#x2F; -0035 如果v2 &lt; v3，跳转到当前位置-35H。0023是目标指令标签。</td>
</tr>
<tr>
<td>35</td>
<td>if-ge vx, vy, 目标</td>
<td>如果vx &gt;&#x3D; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>3510 1B00 - if-ge v0, v1, 002b &#x2F;&#x2F; +001b 如果v0 &gt;&#x3D; v1，跳转到当前位置+1BH。002b是目标指令标签。</td>
</tr>
<tr>
<td>36</td>
<td>if-gt vx,vy, 目标</td>
<td>如果vx &gt; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>3610 1B00 - if-ge v0, v1, 002b &#x2F;&#x2F; +001b 如果v0 &gt; v1，跳转到当前位置+1BH。002b是目标指令标签。</td>
</tr>
<tr>
<td>37</td>
<td>if-le vx,vy, 目标</td>
<td>如果vx &lt;&#x3D; vy注2，跳转到目标。vx和vy是int型值。</td>
<td>3756 0B00 - if-le v6, v5, 0144 &#x2F;&#x2F; +000b 如果v6 &lt;&#x3D; v5，跳转到当前位置+0BH。0144是目标指令标签。</td>
</tr>
<tr>
<td>38</td>
<td>if-eqz vx, 目标</td>
<td>如果vx &#x3D;&#x3D; 0注2，跳转到目标。vx是int型值。</td>
<td>3802 1900 - if-eqz v2, 0038 &#x2F;&#x2F; +0019 如果v2 &#x3D;&#x3D; 0，跳转到当前位置+19H。0038是目标指令标签。</td>
</tr>
<tr>
<td>39</td>
<td>if-nez vx, 目标</td>
<td>如果vx !&#x3D; 0注2，跳转到目标。</td>
<td>3902 1200 - if-nez v2, 0014 &#x2F;&#x2F; +0012 如果v2 !&#x3D; 0，跳转到当前位置+18(hex 12)。0014是目标指令标签。</td>
</tr>
<tr>
<td>3A</td>
<td>if-ltz vx, 目标</td>
<td>如果vx &lt; 0注2，跳转到目标。</td>
<td>3A00 1600 - if-ltz v0, 002d &#x2F;&#x2F; +0016 如果v0 &lt; 0，跳转到当前位置+16H。002d是目标指令标签。</td>
</tr>
<tr>
<td>3B</td>
<td>if-gez vx, 目标</td>
<td>如果vx &gt;&#x3D; 0注2，跳转到目标。</td>
<td>3B00 1600 - if-gez v0, 002d &#x2F;&#x2F; +0016 如果v0 &gt;&#x3D; 0，跳转到当前位置+16H。002d是目标指令标签。</td>
</tr>
<tr>
<td>3C</td>
<td>if-gtz vx, 目标</td>
<td>如果vx &gt; 0注2，跳转到目标。</td>
<td>3C00 1D00 - if-gtz v0, 004a &#x2F;&#x2F; +001d 如果v0 &gt; 0，跳转到当前位置+1DH。004a是目标指令标签。</td>
</tr>
<tr>
<td>3D</td>
<td>if-lez vx, 目标</td>
<td>如果vx &lt;&#x3D; 0注2，跳转到目标。</td>
<td>3D00 1D00 - if-lez v0, 004a &#x2F;&#x2F; +001d 如果v0 &lt;&#x3D; 0，跳转到当前位置+1DH。004a是目标指令标签。</td>
</tr>
<tr>
<td>3E</td>
<td>unused_3E</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>3F</td>
<td>unused_3F</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>40</td>
<td>unused_40</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>41</td>
<td>unused_41</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>42</td>
<td>unused_42</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>43</td>
<td>unused_43</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>44</td>
<td>aget vx, vy, vz</td>
<td>从int数组获取一个int型值到vx，对象数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4407 0306 - aget v7, v3, v6 从数组获取一个int型值到v7，对象数组的引用位于v3，需获取的元素的索引位于v6。</td>
</tr>
<tr>
<td>45</td>
<td>aget-wide vx, vy, vz</td>
<td>从long&#x2F;double数组获取一个long&#x2F;double值到vx,vx+1，数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4505 0104 - aget-wide v5, v1, v4 从long&#x2F;double数组获取一个long&#x2F;double值到v5,vx6，数组的引用位于v1，需获取的元素的索引位于v4。</td>
</tr>
<tr>
<td>46</td>
<td>aget-object vx, vy, vz</td>
<td>从对象引用数组获取一个对象引用到vx，对象数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4602 0200 - aget-object v2, v2, v0 从对象引用数组获取一个对象引用到v2，对象数组的引用位于v2，需获取的元素的索引位于v0。</td>
</tr>
<tr>
<td>47</td>
<td>aget-boolean vx, vy, vz</td>
<td>从boolean数组获取一个boolean值到vx，数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4700 0001 - aget-boolean v0, v0, v1 从boolean数组获取一个boolean值到v0，数组的引用位于v0，需获取的元素的索引位于v1。</td>
</tr>
<tr>
<td>48</td>
<td>aget-byte vx, vy, vz</td>
<td>从byte数组获取一个byte值到vx，数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4800 0001 - aget-byte v0, v0, v1 从byte数组获取一个byte值到v0，数组的引用位于v0，需获取的元素的索引位于v1。</td>
</tr>
<tr>
<td>49</td>
<td>aget-char vx, vy, vz</td>
<td>从char数组获取一个char值到vx，数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4905 0003 - aget-char v5, v0, v3 从char数组获取一个char值到v5，数组的引用位于v0，需获取的元素的索引位于v3。</td>
</tr>
<tr>
<td>4A</td>
<td>aget-short vx, vy, vz</td>
<td>从short数组获取一个short值到vx，数组的引用位于vy，需获取的元素的索引位于vz。</td>
<td>4A00 0001 - aget-short v0, v0, v1 从short数组获取一个short值到v0，数组的引用位于v0，需获取的元素的索引位于v1。</td>
</tr>
<tr>
<td>4B</td>
<td>aput vx, vy, vz</td>
<td>将vx的int值作为元素存入int数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>4B00 0305 - aput v0, v3, v5 将v0的int值作为元素存入int数组，数组的引用位于v3，元素的索引位于v5。</td>
</tr>
<tr>
<td>4C</td>
<td>aput-wide vx, vy, vz</td>
<td>将vx,vx+1的double&#x2F;long值作为元素存入double&#x2F;long数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>4C05 0104 - aput-wide v5, v1, v4 将v5,v6的double&#x2F;long值作为元素存入double&#x2F;long数组，数组的引用位于v1，元素的索引位于v4。</td>
</tr>
<tr>
<td>4D</td>
<td>aput-object vx, vy, vz</td>
<td>将vx的对象引用作为元素存入对象引用数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>4D02 0100 - aput-object v2, v1, v0 将v2的对象引用作为元素存入对象引用数组，数组的引用位于v1，元素的索引位于v0。</td>
</tr>
<tr>
<td>4E</td>
<td>aput-boolean vx, vy, vz</td>
<td>将vx的boolean值作为元素存入boolean数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>4E01 0002 - aput-boolean v1, v0, v2 将v1的boolean值作为元素存入boolean数组，数组的引用位于v0，元素的索引位于v2。</td>
</tr>
<tr>
<td>4F</td>
<td>aput-byte vx, vy, vz</td>
<td>将vx的byte值作为元素存入byte数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>4F02 0001 - aput-byte v2, v0, v1 将v2的byte值作为元素存入byte数组，数组的引用位于v0，元素的索引位于v1。</td>
</tr>
<tr>
<td>50</td>
<td>aput-char vx, vy, vz</td>
<td>将vx的char值作为元素存入char数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>5003 0001 - aput-char v3, v0, v1 将v3的char值作为元素存入char数组，数组的引用位于v0，元素的索引位于v1。</td>
</tr>
<tr>
<td>51</td>
<td>aput-short vx, vy, vz</td>
<td>将vx的short值作为元素存入short数组，数组的引用位于vy，元素的索引位于vz。</td>
<td>5102 0001 - aput-short v2, v0, v1 将v2的short值作为元素存入short数组，数组的引用位于v0，元素的索引位于v1。</td>
</tr>
<tr>
<td>52</td>
<td>iget vx, vy, 字段ID</td>
<td>根据字段ID读取实例的int型字段到vx，vy寄存器中是该实例的引用。</td>
<td>5210 0300 - iget v0, v1, Test2.i6:I &#x2F;&#x2F; field@0003 读取int型字段i6（字段表#3条目）到v0，v1寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>53</td>
<td>iget-wide vx, vy, 字段ID</td>
<td>根据字段ID读取实例的double&#x2F;long型字段到vx,vx+1注1，vy寄存器中是该实例的引用。</td>
<td>5320 0400 - iget-wide v0, v2, Test2.l0:J &#x2F;&#x2F; field@0004 读取long型字段l0（字段表#4条目）到v0,v1，v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>54</td>
<td>iget-object vx, vy, 字段ID</td>
<td>根据字段ID读取一个实例的对象引用字段到vx，vy寄存器中是该实例的引用。</td>
<td>iget-object v1, v2, LineReader.fis:Ljava&#x2F;io&#x2F;FileInputStream; &#x2F;&#x2F; field@0002 读取FileInputStream对象引用字段fis（字段表#2条目）到v1，v2寄存器中是LineReader实例的引用。</td>
</tr>
<tr>
<td>55</td>
<td>iget-boolean vx, vy, 字段ID</td>
<td>根据字段ID读取实例的boolean型字段到vx，vy寄存器中是该实例的引用。</td>
<td>55FC 0000 - iget-boolean v12, v15, Test2.b0:Z &#x2F;&#x2F; field@0000 读取boolean型字段b0（字段表#0条目）到v12，v15寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>56</td>
<td>iget-byte vx, vy, 字段ID</td>
<td>根据字段ID读取实例的byte型字段到vx，vy寄存器中是该实例的引用。</td>
<td>5632 0100 - iget-byte v2, v3, Test3.bi1:B &#x2F;&#x2F; field@0001 读取byte型字段bi1（字段表#1条目）到v2，v3寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>57</td>
<td>iget-char vx, vy, 字段ID</td>
<td>根据字段ID读取实例的char型字段到vx，vy寄存器中是该实例的引用。</td>
<td>5720 0300 - iget-char v0, v2, Test3.ci1:C &#x2F;&#x2F; field@0003 读取char型字段bi1（字段表#3条目）到v0，v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>58</td>
<td>iget-short vx, vy, 字段ID</td>
<td>根据字段ID读取实例的short型字段到vx，vy寄存器中是该实例的引用。</td>
<td>5830 0800 - iget-short v0, v3, Test3.si1:S &#x2F;&#x2F; field@0008 读取short型字段si1（字段表#8条目）到v0，v3寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>59</td>
<td>iput vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的int型字段，vy寄存器中是该实例的引用。</td>
<td>5920 0200 - iput v0, v2, Test2.i6:I &#x2F;&#x2F; field@0002 将v0寄存器的值存入实例的int型字段i6（字段表#2条目），v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>5A</td>
<td>iput-wide vx, vy, 字段ID</td>
<td>根据字段ID将vx,vx+1寄存器的值存入实例的double&#x2F;long型字段，vy寄存器中是该实例的引用。</td>
<td>5A20 0000 - iput-wide v0, v2, Test2.d0:D &#x2F;&#x2F; field@0000 将v0,v1寄存器的值存入实例的double型字段d0（字段表#0条目），v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>5B</td>
<td>iput-object vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的对象引用字段，vy寄存器中是该实例的引用。</td>
<td>5B20 0000 - iput-object v0, v2, LineReader.bis:Ljava&#x2F;io&#x2F;BufferedInputStream; &#x2F;&#x2F; field@0000 将v0寄存器的值存入实例的对象引用字段bis（字段表#0条目），v2寄存器中是BufferedInputStream实例的引用。</td>
</tr>
<tr>
<td>5C</td>
<td>iput-boolean vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的boolean型字段，vy寄存器中是该实例的引用。</td>
<td>5C30 0000 - iput-boolean v0, v3, Test2.b0:Z &#x2F;&#x2F; field@0000 将v0寄存器的值存入实例的boolean型字段b0（字段表#0条目），v3寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>5D</td>
<td>iput-byte vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的byte型字段，vy寄存器中是该实例的引用。</td>
<td>5D20 0100 - iput-byte v0, v2, Test3.bi1:B &#x2F;&#x2F; field@0001 将v0寄存器的值存入实例的byte型字段bi1（字段表#1条目），v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>5E</td>
<td>iput-char vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的char型字段，vy寄存器中是该实例的引用。</td>
<td>5E20 0300 - iput-char v0, v2, Test3.ci1:C &#x2F;&#x2F; field@0003 将v0寄存器的值存入实例的char型字段ci1（字段表#3条目），v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>5F</td>
<td>iput-short vx, vy, 字段ID</td>
<td>根据字段ID将vx寄存器的值存入实例的short型字段，vy寄存器中是该实例的引用。</td>
<td>5F21 0800 - iput-short v1, v2, Test3.si1:S &#x2F;&#x2F; field@0008 将v0寄存器的值存入实例的short型字段si1（字段表#8条目），v2寄存器中是Test2实例的引用。</td>
</tr>
<tr>
<td>60</td>
<td>sget vx, 字段ID</td>
<td>根据字段ID读取静态int型字段到vx。</td>
<td>6000 0700 - sget v0, Test3.is1:I &#x2F;&#x2F; field@0007 读取Test3的静态int型字段is1（字段表#7条目）到v0。</td>
</tr>
<tr>
<td>61</td>
<td>sget-wide vx, 字段ID</td>
<td>根据字段ID读取静态double&#x2F;long型字段到vx,vx+1。</td>
<td>6100 0500 - sget-wide v0, Test2.l1:J &#x2F;&#x2F; field@0005 读取Test2的静态long型字段l1（字段表#5条目）到v0,v1。</td>
</tr>
<tr>
<td>62</td>
<td>sget-object vx, 字段ID</td>
<td>根据字段ID读取静态对象引用字段到vx。</td>
<td>6201 0C00 - sget-object v1, Test3.os1:Ljava&#x2F;lang&#x2F;Object; &#x2F;&#x2F; field@000c 读取Object的静态对象引用字段os1（字段表#CH条目）到v1。</td>
</tr>
<tr>
<td>63</td>
<td>sget-boolean vx, 字段ID</td>
<td>根据字段ID读取静态boolean型字段到vx。</td>
<td>6300 0C00 - sget-boolean v0, Test2.sb:Z &#x2F;&#x2F; field@000c 读取Test2的静态boolean型字段sb（字段表#CH条目）到v0。</td>
</tr>
<tr>
<td>64</td>
<td>sget-byte vx, 字段ID</td>
<td>根据字段ID读取静态byte型字段到vx。</td>
<td>6400 0200 - sget-byte v0, Test3.bs1:B &#x2F;&#x2F; field@0002 读取Test3的静态byte型字段bs1（字段表#2条目）到v0。</td>
</tr>
<tr>
<td>65</td>
<td>sget-char vx, 字段ID</td>
<td>根据字段ID读取静态char型字段到vx。</td>
<td>6500 0700 - sget-char v0, Test3.cs1:C &#x2F;&#x2F; field@0007 读取Test3的静态char型字段cs1（字段表#7条目）到v0。</td>
</tr>
<tr>
<td>66</td>
<td>sget-short vx, 字段ID</td>
<td>根据字段ID读取静态short型字段到vx。</td>
<td>6600 0B00 - sget-short v0, Test3.ss1:S &#x2F;&#x2F; field@000b 读取Test3的静态short型字段ss1（字段表#CH条目）到v0。</td>
</tr>
<tr>
<td>67</td>
<td>sput vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的值赋值到int型静态字段。</td>
<td>6700 0100 - sput v0, Test2.i5:I &#x2F;&#x2F; field@0001 将v0寄存器中的值赋值到Test2的int型静态字段i5（字段表#1条目）。</td>
</tr>
<tr>
<td>68</td>
<td>sput-wide vx, 字段ID</td>
<td>根据字段ID将vx,vx+1寄存器中的值赋值到double&#x2F;long型静态字段。</td>
<td>6800 0500 - sput-wide v0, Test2.l1:J &#x2F;&#x2F; field@0005 将v0,v1寄存器中的值赋值到Test2的long型静态字段l1（字段表#5条目）。</td>
</tr>
<tr>
<td>69</td>
<td>sput-object vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的对象引用赋值到对象引用静态字段。</td>
<td>6900 0c00 - sput-object v0, Test3.os1:Ljava&#x2F;lang&#x2F;Object; &#x2F;&#x2F; field@000c 将v0寄存器中的对象引用赋值到Test3的对象引用静态字段os1（字段表#CH条目）。</td>
</tr>
<tr>
<td>6A</td>
<td>sput-boolean vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的值赋值到boolean型静态字段。</td>
<td>6A00 0300 - sput-boolean v0, Test3.bls1:Z &#x2F;&#x2F; field@0003 将v0寄存器中的值赋值到Test3的boolean型静态字段bls1（字段表#3条目）。</td>
</tr>
<tr>
<td>6B</td>
<td>sput-byte vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的值赋值到byte型静态字段。</td>
<td>6B00 0200 - sput-byte v0, Test3.bs1:B &#x2F;&#x2F; field@0002 将v0寄存器中的值赋值到Test3的byte型静态字段bs1（字段表#2条目）。</td>
</tr>
<tr>
<td>6C</td>
<td>sput-char vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的值赋值到char型静态字段。</td>
<td>6C01 0700 - sput-char v1, Test3.cs1:C &#x2F;&#x2F; field@0007 将v1寄存器中的值赋值到Test3的char型静态字段cs1（字段表#7条目）。</td>
</tr>
<tr>
<td>6D</td>
<td>sput-short vx, 字段ID</td>
<td>根据字段ID将vx寄存器中的值赋值到short型静态字段。</td>
<td>6D00 0B00 - sput-short v0, Test3.ss1:S &#x2F;&#x2F; field@000b 将v0寄存器中的值赋值到Test3的short型静态字段ss1（字段表#BH条目）。</td>
</tr>
<tr>
<td>6E</td>
<td>invoke-virtual {参数}, 方法名</td>
<td>调用带参数的虚拟方法。</td>
<td>6E53 0600 0421 - invoke-virtual { v4, v0, v1, v2, v3}, Test2.method5:(IIII)V &#x2F;&#x2F; method@0006 调用Test2的method5（方法表#6条目）方法，该指令共有5个参数（操作码第二个字节的4个最高有效位5）注5。参数v4是”this”实例，v0, v1, v2, v3是method5方法的参数，(IIII)V的4个I分表表示4个int型参数，V表示返回值为void。</td>
</tr>
<tr>
<td>6F</td>
<td>invoke-super {参数}, 方法名</td>
<td>调用带参数的直接父类的虚拟方法。</td>
<td>6F10 A601 0100 invoke-super {v1},java.io.FilterOutputStream.close:()V &#x2F;&#x2F; method@01a6 调用java.io.FilterOutputStream的close（方法表#1A6条目）方法，参数v1是”this”实例。()V表示close方法没有参数，V表示返回值为void。</td>
</tr>
<tr>
<td>70</td>
<td>invoke-direct {参数}, 方法名</td>
<td>不解析直接调用带参数的方法。</td>
<td>7010 0800 0100 - invoke-direct {v1}, java.lang.Object.<init>:()V &#x2F;&#x2F; method@0008 调用java.lang.Object 的<init>（方法表#8条目）方法，参数v1是”this”实例注5。()V表示<init>方法没有参数，V表示返回值为void。</td>
</tr>
<tr>
<td>71</td>
<td>invoke-static {参数}, 方法名</td>
<td>调用带参数的静态方法。</td>
<td>7110 3400 0400 - invoke-static {v4}, java.lang.Integer.parseInt:( Ljava&#x2F;lang&#x2F;String;)I &#x2F;&#x2F; method@0034 调用java.lang.Integer 的parseInt（方法表#34条目）静态方法，该指令只有1个参数v4注5，(Ljava&#x2F;lang&#x2F;String;)I中的Ljava&#x2F;lang&#x2F;String;表示parseInt方法需要String类型的参数，I表示返回值为int型。</td>
</tr>
<tr>
<td>72</td>
<td>invoke-interface {参数}, 方法名</td>
<td>调用带参数的接口方法。</td>
<td>7240 2102 3154 invoke-interface {v1, v3, v4, v5}, mwfw.IReceivingProtocolAdapter.receivePackage:(ILjava&#x2F;lang&#x2F;String;Ljava&#x2F;io&#x2F;InputStream;)Z &#x2F;&#x2F; method@0221 调用mwfw.IReceivingProtocolAdapter 接口的receivePackage方法（方法表#221条目），该指令共有4个参数注5，参数v1是”this”实例，v3,v4,v5是receivePackage方法的参数，(ILjava&#x2F;lang&#x2F;String;Ljava&#x2F;io&#x2F;InputStream;)Z中的I表示int型参数，Ljava&#x2F;lang&#x2F;String;表示String类型参数，Ljava&#x2F;io&#x2F;InputStream;表示InputStream类型参数，Z表示返回值为boolean型。</td>
</tr>
<tr>
<td>73</td>
<td>unused_73</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>74</td>
<td>invoke-virtual&#x2F;range {vx..vy}, 方法名</td>
<td>调用以寄存器范围为参数的虚拟方法。该指令第一个寄存器和寄存器的数量将传递给方法。</td>
<td>7403 0600 1300 - invoke-virtual {v19..v21}, Test2.method5:(IIII)V &#x2F;&#x2F; method@0006 调用Test2的method5（方法表#6条目）方法，该指令共有3个参数。参数v19是”this”实例，v20,v21是method5方法的参数，(IIII)V的4个I分表表示4个int型参数，V表示返回值为void。</td>
</tr>
<tr>
<td>75</td>
<td>invoke-super&#x2F;range {vx..vy}, 方法名</td>
<td>调用以寄存器范围为参数的直接父类的虚拟方法。该指令第一个寄存器和寄存器的数量将会传递给方法。</td>
<td>7501 A601 0100 invoke-super {v1},java.io.FilterOutputStream.close:()V &#x2F;&#x2F; method@01a6 调用java.io.FilterOutputStream的close（方法表#1A6条目）方法，参数v1是”this”实例。()V表示close方法没有参数，V表示返回值为void。</td>
</tr>
<tr>
<td>76</td>
<td>invoke-direct&#x2F;range {vx..vy}, 方法名</td>
<td>不解析直接调用以寄存器范围为参数的方法。该指令第一个寄存器和寄存器的数量将会传递给方法。</td>
<td>7603 3A00 1300 - invoke-direct&#x2F;range {v19..21},java.lang.Object.<init>:()V &#x2F;&#x2F; method@003a 调用java.lang.Object 的<init>（方法表#3A条目）方法，参数v19是”this”实例（操作码第五、第六字节表示范围从v19开始，第二个字节为03表示传入了3个参数），()V表示<init>方法没有参数，V表示返回值为void。</td>
</tr>
<tr>
<td>77</td>
<td>invoke-static&#x2F;range {vx..vy}, 方法名</td>
<td>调用以寄存器范围为参数的静态方法。该指令第一个寄存器和寄存器的数量将会传递给方法。</td>
<td>7703 3A00 1300 - invoke-static&#x2F;range {v19..21},java.lang.Integer.parseInt:(Ljava&#x2F;lang&#x2F;String;)I &#x2F;&#x2F; method@0034 调用java.lang.Integer 的parseInt（方法表#34条目）静态方法，参数v19是”this”实例（操作码第五、第六字节表示范围从v19开始，第二个字节为03表示传入了3个参数），(Ljava&#x2F;lang&#x2F;String;)I中的Ljava&#x2F;lang&#x2F;String;表示parseInt方法需要String类型的参数，I表示返回值为int型。</td>
</tr>
<tr>
<td>78</td>
<td>invoke-interface-range {vx..vy}, 方法名</td>
<td>调用以寄存器范围为参数的接口方法。该指令第一个寄存器和寄存器的数量将会传递给方法。</td>
<td>7840 2102 0100 invoke-interface {v1..v4}, mwfw.IReceivingProtocolAdapter.receivePackage:(ILjava&#x2F;lang&#x2F;String;Ljava&#x2F;io&#x2F;InputStream;)Z &#x2F;&#x2F; method@0221 调用mwfw.IReceivingProtocolAdapter 接口的receivePackage方法（方法表#221条目），该指令共有4个参数注5，参数v1是”this”实例，v2,v3,v4是receivePackage方法的参数，(ILjava&#x2F;lang&#x2F;String;Ljava&#x2F;io&#x2F;InputStream;)Z中的I表示int型参数，Ljava&#x2F;lang&#x2F;String;表示String类型参数，Ljava&#x2F;io&#x2F;InputStream;表示InputStream类型参数，Z表示返回值为boolean型。</td>
</tr>
<tr>
<td>79</td>
<td>unused_79</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>7A</td>
<td>unused_7A</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>7B</td>
<td>neg-int vx, vy</td>
<td>计算vx &#x3D; -vy并将结果存入vx。</td>
<td>7B01 - neg-int v1,v0 计算-v0并将结果存入v1。</td>
</tr>
<tr>
<td>7C</td>
<td>not-int vx, vy</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>7D</td>
<td>neg-long vx, vy</td>
<td>计算vx,vx+1 &#x3D; -(vy,vy+1) 并将结果存入vx,vx+1。</td>
<td>7D02 - neg-long v2,v0 计算-(v0,v1) 并将结果存入(v2,v3)。</td>
</tr>
<tr>
<td>7E</td>
<td>not-long vx, vy</td>
<td>未知注4</td>
<td></td>
</tr>
<tr>
<td>7F</td>
<td>neg-float vx, vy</td>
<td>计算vx &#x3D; -vy并将结果存入vx。</td>
<td>7F01 - neg-float v1,v0 计算-v0并将结果存入v1。</td>
</tr>
<tr>
<td>80</td>
<td>neg-double vx, vy</td>
<td>计算vx,vx+1&#x3D;-(vy,vy+1) 并将结果存入vx,vx+1。</td>
<td>8002 - neg-double v2,v0 计算-(v0,v1) 并将结果存入(v2,v3)。</td>
</tr>
<tr>
<td>81</td>
<td>int-to-long vx, vy</td>
<td>转换vy寄存器中的int型值为long型值存入vx,vx+1。</td>
<td>8106 - int-to-long v6, v0 转换v0寄存器中的int型值为long型值存入v6,v7。</td>
</tr>
<tr>
<td>82</td>
<td>int-to-float vx, vy</td>
<td>转换vy寄存器中的int型值为float型值存入vx。</td>
<td>8206 - int-to-float v6, v0 转换v0寄存器中的int型值为float型值存入v6。</td>
</tr>
<tr>
<td>83</td>
<td>int-to-double vx, vy</td>
<td>转换vy寄存器中的int型值为double型值存入vx,vx+1。</td>
<td>8306 - int-to-double v6, v0 转换v0寄存器中的int型值为double型值存入v6,v7。</td>
</tr>
<tr>
<td>84</td>
<td>long-to-int vx, vy</td>
<td>转换vy,vy+1寄存器中的long型值为int型值存入vx。</td>
<td>8424 - long-to-int v4, v2 转换v2,v3寄存器中的long型值为int型值存入v4。</td>
</tr>
<tr>
<td>85</td>
<td>long-to-float vx, vy</td>
<td>转换vy,vy+1寄存器中的long型值为float型值存入vx。</td>
<td>8510 - long-to-float v0, v1 转换v1,v2寄存器中的long型值为float型值存入v0。</td>
</tr>
<tr>
<td>86</td>
<td>long-to-double vx, vy</td>
<td>转换vy,vy+1寄存器中的long型值为double型值存入vx,vx+1。</td>
<td>8610 - long-to-double v0, v1 转换v1,vy2寄存器中的long型值为double型值存入v0,v1。</td>
</tr>
<tr>
<td>87</td>
<td>float-to-int vx, vy</td>
<td>转换vy寄存器中的float型值为int型值存入vx。</td>
<td>8730 - float-to-int v0, v3 转换v3寄存器中的float型值为int型值存入v0。</td>
</tr>
<tr>
<td>88</td>
<td>float-to-long vx, vy</td>
<td>转换vy寄存器中的float型值为long型值存入vx,vx+1。</td>
<td>8830 - float-to-long v0, v3 转换v3寄存器中的float型值为long型值存入v0,v1。</td>
</tr>
<tr>
<td>89</td>
<td>float-to-double vx, vy</td>
<td>转换vy寄存器中的float型值为double型值存入vx,vx+1。</td>
<td>8930 - float-to-double v0, v3 转换v3寄存器中的float型值为double型值存入v0,v1。</td>
</tr>
<tr>
<td>8A</td>
<td>double-to-int vx, vy</td>
<td>转换vy,vy+1寄存器中的double型值为int型值存入vx。</td>
<td>8A40 - double-to-int v0, v4 转换v4,v5寄存器中的double型值为int型值存入v0。</td>
</tr>
<tr>
<td>8B</td>
<td>double-to-long vx, vy</td>
<td>转换vy,vy+1寄存器中的double型值为long型值存入vx,vx+1。</td>
<td>8B40 - double-to-long v0, v4 转换v4,v5寄存器中的double型值为long型值存入v0,v1。</td>
</tr>
<tr>
<td>8C</td>
<td>double-to-float vx, vy</td>
<td>转换vy,vy+1寄存器中的double型值为float型值存入vx。</td>
<td>8C40 - double-to-float v0, v4 转换v4,v5寄存器中的double型值为float型值存入v0。</td>
</tr>
<tr>
<td>8D</td>
<td>int-to-byte vx, vy</td>
<td>转换vy寄存器中的int型值为byte型值存入vx。</td>
<td>8D00 - int-to-byte v0, v0 转换v0寄存器中的int型值为byte型值存入v0。</td>
</tr>
<tr>
<td>8E</td>
<td>int-to-char vx, vy</td>
<td>转换vy寄存器中的int型值为char型值存入vx。</td>
<td>8E33 - int-to-char v3, v3 转换v3寄存器中的int型值为char型值存入v3。</td>
</tr>
<tr>
<td>8F</td>
<td>int-to-short vx, vy</td>
<td>转换vy寄存器中的int型值为short型值存入vx。</td>
<td>8F00 - int-to-short v3, v0 转换v0寄存器中的int型值为short型值存入v0。</td>
</tr>
<tr>
<td>90</td>
<td>add-int vx, vy, vz</td>
<td>计算vy + vz并将结果存入vx。</td>
<td>9000 0203 - add-int v0, v2, v3 计算v2 + v3并将结果存入v0注4。</td>
</tr>
<tr>
<td>91</td>
<td>sub-int vx, vy, vz</td>
<td>计算vy - vz并将结果存入vx。</td>
<td>9100 0203 - sub-int v0, v2, v3 计算v2 – v3并将结果存入v0。</td>
</tr>
<tr>
<td>92</td>
<td>mul-int vx, vy, vz</td>
<td>计算vy * vz并将结果存入vx。</td>
<td>9200 0203 - mul-int v0,v2,v3 计算v2 * w3并将结果存入v0。</td>
</tr>
<tr>
<td>93</td>
<td>div-int vx, vy, vz</td>
<td>计算vy &#x2F; vz并将结果存入vx。</td>
<td>9303 0001 - div-int v3, v0, v1 计算v0 &#x2F; v1并将结果存入v3。</td>
</tr>
<tr>
<td>94</td>
<td>rem-int vx, vy, vz</td>
<td>计算vy % vz并将结果存入vx。</td>
<td>9400 0203 - rem-int v0, v2, v3 计算v3 % v2并将结果存入v0。</td>
</tr>
<tr>
<td>95</td>
<td>and-int vx, vy, vz</td>
<td>计算vy 与 vz并将结果存入vx。</td>
<td>9503 0001 - and-int v3, v0, v1 计算v0 与 v1并将结果存入v3。</td>
</tr>
<tr>
<td>96</td>
<td>or-int vx, vy, vz</td>
<td>计算vy 或 vz并将结果存入vx。</td>
<td>9603 0001 - or-int v3, v0, v1 计算v0 或 v1并将结果存入v3。</td>
</tr>
<tr>
<td>97</td>
<td>xor-int vx, vy, vz</td>
<td>计算vy 异或 vz并将结果存入vx。</td>
<td>9703 0001 - xor-int v3, v0, v1 计算v0 异或 v1并将结果存入v3。</td>
</tr>
<tr>
<td>98</td>
<td>shl-int vx, vy, vz</td>
<td>左移vy，vz指定移动的位置，结果存入vx。</td>
<td>9802 0001 - shl-int v2, v0, v1 以v1指定的位置左移v0，结果存入v2。</td>
</tr>
<tr>
<td>99</td>
<td>shr-int vx, vy, vz</td>
<td>右移vy，vz指定移动的位置，结果存入vx。</td>
<td>9902 0001 - shr-int v2, v0, v1 以v1指定的位置右移v0，结果存入v2。</td>
</tr>
<tr>
<td>9A</td>
<td>ushr-int vx, vy, vz</td>
<td>无符号右移vy，vz指定移动的位置，结果存入vx。</td>
<td>9A02 0001 - ushr-int v2, v0, v1 以v1指定的位置无符号右移v0，结果存入v2。</td>
</tr>
<tr>
<td>9B</td>
<td>add-long vx, vy, vz</td>
<td>计算vy,vy+1 + vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>9B00 0305 - add-long v0, v3, v5 计算v3,v4 + v5,v6并将结果存入v0,v1。</td>
</tr>
<tr>
<td>9C</td>
<td>sub-long vx, vy, vz</td>
<td>计算vy,vy+1 - vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>9C00 0305 - sub-long v0, v3, v5 计算v3,v4 - v5,v6并将结果存入v0,v1。</td>
</tr>
<tr>
<td>9D</td>
<td>mul-long vx, vy, vz</td>
<td>计算vy,vy+1 * vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>9D00 0305 - mul-long v0, v3, v5 计算v3,v4 * v5,v6并将结果存入v0,v1。</td>
</tr>
<tr>
<td>9E</td>
<td>div-long vx, vy, vz</td>
<td>计算vy,vy+1 &#x2F; vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>9E06 0002 - div-long v6, v0, v2 计算v0,v1 &#x2F; v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>9F</td>
<td>rem-long vx, vy, vz</td>
<td>计算vy,vy+1 % vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>9F06 0002 - rem-long v6, v0, v2 计算v0,v1 % v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>A0</td>
<td>and-long vx, vy, vz</td>
<td>计算vy,vy+1 与 vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>A006 0002 - and-long v6, v0, v2 计算v0,v1 与 v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>A1</td>
<td>or-long vx, vy, vz</td>
<td>计算vy,vy+1 或 vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>A106 0002 - or-long v6, v0, v2 计算v0,v1 或 v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>A2</td>
<td>xor-long vx, vy, vz</td>
<td>计算vy,vy+1 异或 vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>A206 0002 - xor-long v6, v0, v2 计算v0,v1 异或 v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>A3</td>
<td>shl-long vx, vy, vz</td>
<td>左移vy,vy+1，vz指定移动的位置，结果存入vx,vx+1注1。</td>
<td>A302 0004 - shl-long v2, v0, v4 以v4指定的位置左移v0,v1，结果存入v2,v3。</td>
</tr>
<tr>
<td>A4</td>
<td>shr-long vx, vy, vz</td>
<td>右移vy,vy+1，vz指定移动的位置，结果存入vx,vx+1注1。</td>
<td>A402 0004 - shr-long v2, v0, v4 以v4指定的位置右移v0,v1，结果存入v2,v3。</td>
</tr>
<tr>
<td>A5</td>
<td>ushr-long vx, vy, vz</td>
<td>无符号右移vy,vy+1，vz指定移动的位置，结果存入vx,vx+1注1。</td>
<td>A502 0004 - ushr-long v2, v0, v4 以v4指定的位置无符号右移v0,v1，结果存入v2,v3。</td>
</tr>
<tr>
<td>A6</td>
<td>add-float vx, vy, vz</td>
<td>计算vy + vz并将结果存入vx。</td>
<td>A600 0203 - add-float v0, v2, v3 计算v2 + v3并将结果存入v0。</td>
</tr>
<tr>
<td>A7</td>
<td>sub-float vx, vy, vz</td>
<td>计算vy - vz并将结果存入vx。</td>
<td>A700 0203 - sub-float v0, v2, v3 计算v2 - v3并将结果存入v0。</td>
</tr>
<tr>
<td>A8</td>
<td>mul-float vx, vy, vz</td>
<td>计算vy * vz并将结果存入vx。</td>
<td>A803 0001 - mul-float v3, v0, v1 计算v0 * v1并将结果存入v3。</td>
</tr>
<tr>
<td>A9</td>
<td>div-float vx, vy, vz</td>
<td>计算vy &#x2F; vz并将结果存入vx。</td>
<td>A903 0001 - div-float v3, v0, v1 计算v0 &#x2F; v1并将结果存入v3。</td>
</tr>
<tr>
<td>AA</td>
<td>rem-float vx, vy, vz</td>
<td>计算vy % vz并将结果存入vx。</td>
<td>AA03 0001 - rem-float v3, v0, v1 计算v0 % v1并将结果存入v3。</td>
</tr>
<tr>
<td>AB</td>
<td>add-double vx, vy, vz</td>
<td>计算vy,vy+1 + vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>AB00 0305 - add-double v0, v3, v5 计算v3,v4 + v5,v6并将结果存入v0,v1。</td>
</tr>
<tr>
<td>AC</td>
<td>sub-double vx, vy, vz</td>
<td>计算vy,vy+1 - vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>AC00 0305 - sub-double v0, v3, v5 计算v3,v4 - v5,v6并将结果存入v0,v1。</td>
</tr>
<tr>
<td>AD</td>
<td>mul-double vx, vy, vz</td>
<td>计算vy,vy+1 * vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>AD06 0002 - mul-double v6, v0, v2 计算v0,v1 * v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>AE</td>
<td>div-double vx, vy, vz</td>
<td>计算vy,vy+1 &#x2F; vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>AE06 0002 - div-double v6, v0, v2 计算v0,v1 &#x2F; v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>AF</td>
<td>rem-double vx, vy, vz</td>
<td>计算vy,vy+1 % vz,vz+1并将结果存入vx,vx+1注1。</td>
<td>AF06 0002 - rem-double v6, v0, v2 计算v0,v1 % v2,v3并将结果存入v6,v7。</td>
</tr>
<tr>
<td>B0</td>
<td>add-int&#x2F;2addr vx, vy</td>
<td>计算vx + vy并将结果存入vx。</td>
<td>B010 - add-int&#x2F;2addr v0,v1 计算v0 + v1并将结果存入v0。</td>
</tr>
<tr>
<td>B1</td>
<td>sub-int&#x2F;2addr vx, vy</td>
<td>计算vx - vy并将结果存入vx。</td>
<td>B140 - sub-int&#x2F;2addr v0, v4 计算v0 – v4并将结果存入v0。</td>
</tr>
<tr>
<td>B2</td>
<td>mul-int&#x2F;2addr vx, vy</td>
<td>计算vx * vy并将结果存入vx。</td>
<td>B210 - mul-int&#x2F;2addr v0, v1 计算v0 * v1并将结果存入v0。</td>
</tr>
<tr>
<td>B3</td>
<td>div-int&#x2F;2addr vx, vy</td>
<td>计算vx &#x2F; vy并将结果存入vx。</td>
<td>B310 - div-int&#x2F;2addr v0, v1 计算v0 &#x2F; v1并将结果存入v0。</td>
</tr>
<tr>
<td>B4</td>
<td>rem-int&#x2F;2addr vx, vy</td>
<td>计算vx % vy并将结果存入vx。</td>
<td>B410 - rem-int&#x2F;2addr v0, v1 计算v0 % v1并将结果存入v0。</td>
</tr>
<tr>
<td>B5</td>
<td>and-int&#x2F;2addr vx, vy</td>
<td>计算vx 与 vy并将结果存入vx。</td>
<td>B510 - and-int&#x2F;2addr v0, v1 计算v0 与 v1并将结果存入v0。</td>
</tr>
<tr>
<td>B6</td>
<td>or-int&#x2F;2addr vx, vy</td>
<td>计算vx 或 vy并将结果存入vx。</td>
<td>B610 - or-int&#x2F;2addr v0, v1 计算v0 或 v1并将结果存入v0。</td>
</tr>
<tr>
<td>B7</td>
<td>xor-int&#x2F;2addr vx, vy</td>
<td>计算vx 异或 vy并将结果存入vx。</td>
<td>B710 - xor-int&#x2F;2addr v0, v1 计算v0 异或 v1并将结果存入v0。</td>
</tr>
<tr>
<td>B8</td>
<td>shl-int&#x2F;2addr vx, vy</td>
<td>左移vx，vy指定移动的位置，并将结果存入vx。</td>
<td>B810 - shl-int&#x2F;2addr v0, v1 以v1指定的位置左移v0，结果存入v0。</td>
</tr>
<tr>
<td>B9</td>
<td>shr-int&#x2F;2addr vx, vy</td>
<td>右移vx，vy指定移动的位置，并将结果存入vx。</td>
<td>B910 - shr-int&#x2F;2addr v0, v1 以v1指定的位置右移v0，结果存入v0。</td>
</tr>
<tr>
<td>BA</td>
<td>ushr-int&#x2F;2addr vx, vy</td>
<td>无符号右移vx，vy指定移动的位置，并将结果存入vx。</td>
<td>BA10 - ushr-int&#x2F;2addr v0, v1 以v1指定的位置无符号右移v0，结果存入v0。</td>
</tr>
<tr>
<td>BB</td>
<td>add-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 + vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>BB20 - add-long&#x2F;2addr v0, v2 计算v0,v1 + v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>BC</td>
<td>sub-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 - vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>BC70 - sub-long&#x2F;2addr v0, v7 计算v0,v1 - v7,v8并将结果存入v0,v1。</td>
</tr>
<tr>
<td>BD</td>
<td>mul-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 * vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>BD70 - mul-long&#x2F;2addr v0, v7 计算v0,v1 * v7,v8并将结果存入v0,v1。</td>
</tr>
<tr>
<td>BE</td>
<td>div-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 &#x2F; vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>BE20 - div-long&#x2F;2addr v0, v2 计算v0,v1 &#x2F; v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>BF</td>
<td>rem-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 % vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>BF20 - rem-long&#x2F;2addr v0, v2 计算v0,v1 % v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>C0</td>
<td>and-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 与 vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>C020 - and-long&#x2F;2addr v0, v2 计算v0,v1 与 v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>C1</td>
<td>or-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 或 vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>C120 - or-long&#x2F;2addr v0, v2 计算v0,v1 或 v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>C2</td>
<td>xor-long&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 异或 vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>C220 - xor-long&#x2F;2addr v0, v2 计算v0,v1 异或 v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>C3</td>
<td>shl-long&#x2F;2addr vx, vy</td>
<td>左移vx,vx+1，vy指定移动的位置，并将结果存入vx,vx+1。</td>
<td>C320 - shl-long&#x2F;2addr v0, v2 以v2指定的位置左移v0,v1，结果存入v0,v1。</td>
</tr>
<tr>
<td>C4</td>
<td>shr-long&#x2F;2addr vx, vy</td>
<td>右移vx,vx+1，vy指定移动的位置，并将结果存入vx,vx+1。</td>
<td>C420 - shr-long&#x2F;2addr v0, v2 以v2指定的位置右移v0,v1，结果存入v0,v1。</td>
</tr>
<tr>
<td>C5</td>
<td>ushr-long&#x2F;2addr vx, vy</td>
<td>无符号右移vx,vx+1，vy指定移动的位置，并将结果存入vx,vx+1。</td>
<td>C520 - ushr-long&#x2F;2addr v0, v2 以v2指定的位置无符号右移v0,v1，结果存入v0,v1。</td>
</tr>
<tr>
<td>C6</td>
<td>add-float&#x2F;2addr vx, vy</td>
<td>计算vx + vy并将结果存入vx。</td>
<td>C640 - add-float&#x2F;2addr v0,v4 计算v0 + v4并将结果存入v0。</td>
</tr>
<tr>
<td>C7</td>
<td>sub-float&#x2F;2addr vx, vy</td>
<td>计算vx - vy并将结果存入vx。</td>
<td>C740 - sub-float&#x2F;2addr v0,v4 计算v0 - v4并将结果存入v0。</td>
</tr>
<tr>
<td>C8</td>
<td>mul-float&#x2F;2addr vx, vy</td>
<td>计算vx * vy并将结果存入vx。</td>
<td>C810 - mul-float&#x2F;2addr v0, v1 计算v0 * v1并将结果存入v0。</td>
</tr>
<tr>
<td>C9</td>
<td>div-float&#x2F;2addr vx, vy</td>
<td>计算vx &#x2F; vy并将结果存入vx。</td>
<td>C910 - div-float&#x2F;2addr v0, v1 计算v0 &#x2F; v1并将结果存入v0。</td>
</tr>
<tr>
<td>CA</td>
<td>rem-float&#x2F;2addr vx, vy</td>
<td>计算vx % vy并将结果存入vx。</td>
<td>CA10 - rem-float&#x2F;2addr v0, v1 计算v0 % v1并将结果存入v0。</td>
</tr>
<tr>
<td>CB</td>
<td>add-double&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 + vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>CB70 - add-double&#x2F;2addr v0, v7 计算v0,v1 + v7,v8并将结果存入v0,v1。</td>
</tr>
<tr>
<td>CC</td>
<td>sub-double&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 - vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>CC70 - sub-double&#x2F;2addr v0, v7 计算v0,v1 - v7,v8并将结果存入v0,v1。</td>
</tr>
<tr>
<td>CD</td>
<td>mul-double&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 * vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>CD20 - mul-double&#x2F;2addr v0, v2 计算v0,v1 * v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>CE</td>
<td>div-double&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 &#x2F; vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>CE20 - div-double&#x2F;2addr v0, v2 计算v0,v1 &#x2F; v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>CF</td>
<td>rem-double&#x2F;2addr vx, vy</td>
<td>计算vx,vx+1 % vy,vy+1并将结果存入vx,vx+1注1。</td>
<td>CF20 - rem-double&#x2F;2addr v0, v2 计算v0,v1 % v2,v3并将结果存入v0,v1。</td>
</tr>
<tr>
<td>D0</td>
<td>add-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy + lit16并将结果存入vx。</td>
<td>D001 D204 - add-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 + 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D1</td>
<td>sub-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy - lit16并将结果存入vx。</td>
<td>D101 D204 - sub-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 - 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D2</td>
<td>mul-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy * lit16并将结果存入vx。</td>
<td>D201 D204 - mul-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 * 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D3</td>
<td>div-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy &#x2F; lit16并将结果存入vx。</td>
<td>D301 D204 - div-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 &#x2F; 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D4</td>
<td>rem-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy % lit16并将结果存入vx。</td>
<td>D401 D204 - rem-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 % 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D5</td>
<td>and-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy 与 lit16并将结果存入vx。</td>
<td>D501 D204 - and-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 与 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D6</td>
<td>or-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy 或 lit16并将结果存入vx。</td>
<td>D601 D204 - or-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 或 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D7</td>
<td>xor-int&#x2F;lit16 vx, vy, lit16</td>
<td>计算vy 异或 lit16并将结果存入vx。</td>
<td>D701 D204 - xor-int&#x2F;lit16 v1, v0, #int 1234 &#x2F;&#x2F; #04d2 计算v0 异或 1234并将结果存入v1。</td>
</tr>
<tr>
<td>D8</td>
<td>add-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy + lit8并将结果存入vx。</td>
<td>D800 0201 - add-int&#x2F;lit8 v0,v2, #int1 计算v2 + 1并将结果存入v0。</td>
</tr>
<tr>
<td>D9</td>
<td>sub-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy - lit8并将结果存入vx。</td>
<td>D900 0201 - sub-int&#x2F;lit8 v0,v2, #int1 计算v2 - 1并将结果存入v0。</td>
</tr>
<tr>
<td>DA</td>
<td>mul-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy * lit8并将结果存入vx。</td>
<td>DA00 0002 - mul-int&#x2F;lit8 v0,v0, #int2 计算v0 * 2并将结果存入v0。</td>
</tr>
<tr>
<td>DB</td>
<td>div-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy &#x2F; lit8并将结果存入vx。</td>
<td>DB00 0203 - mul-int&#x2F;lit8 v0,v2, #int3 计算v2 &#x2F; 3并将结果存入v0。</td>
</tr>
<tr>
<td>DC</td>
<td>rem-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy % lit8并将结果存入vx。</td>
<td>DC00 0203 - rem-int&#x2F;lit8 v0,v2, #int3 计算v2 % 3并将结果存入v0。</td>
</tr>
<tr>
<td>DD</td>
<td>and-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy 与 lit8并将结果存入vx。</td>
<td>DD00 0203 - and-int&#x2F;lit8 v0,v2, #int3 计算v2 与 3并将结果存入v0。</td>
</tr>
<tr>
<td>DE</td>
<td>or-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy 或 lit8并将结果存入vx。</td>
<td>DE00 0203 - or-int&#x2F;lit8 v0, v2, #int 3 计算v2 或 3并将结果存入v0。</td>
</tr>
<tr>
<td>DF</td>
<td>xor-int&#x2F;lit8 vx, vy, lit8</td>
<td>计算vy异或lit8并将结果存入vx。</td>
<td>DF00 0203 | 0008: xor-int&#x2F;lit8 v0, v2, #int 3 计算v2 异或 3并将结果存入v0。</td>
</tr>
<tr>
<td>E0</td>
<td>shl-int&#x2F;lit8 vx, vy, lit8</td>
<td>左移vy，lit8指定移动的位置，并将结果存入vx。</td>
<td>E001 0001 - shl-int&#x2F;lit8 v1, v0, #int 1 将v0左移1位，结果存入v1。</td>
</tr>
<tr>
<td>E1</td>
<td>shr-int&#x2F;lit8 vx, vy, lit8</td>
<td>右移vy，lit8指定移动的位置，并将结果存入vx。</td>
<td>E101 0001 - shr-int&#x2F;lit8 v1, v0, #int 1 将v0右移1位，结果存入v1。</td>
</tr>
<tr>
<td>E2</td>
<td>ushr-int&#x2F;lit8 vx, vy, lit8</td>
<td>无符号右移vy，lit8指定移动的位置，并将结果存入vx。</td>
<td>E201 0001 - ushr-int&#x2F;lit8 v1, v0, #int 1 将v0无符号右移1位，结果存入v1。</td>
</tr>
<tr>
<td>E3</td>
<td>unused_E3</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E4</td>
<td>unused_E4</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E5</td>
<td>unused_E5</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E6</td>
<td>unused_E6</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E7</td>
<td>unused_E7</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E8</td>
<td>unused_E8</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>E9</td>
<td>unused_E9</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>EA</td>
<td>unused_EA</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>EB</td>
<td>unused_EB</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>EC</td>
<td>unused_EC</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>ED</td>
<td>unused_ED</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>EE</td>
<td>execute-inline {参数}, 内联ID</td>
<td>根据内联ID注6执行内联方法。</td>
<td>EE20 0300 0100 - execute-inline {v1, v0}, inline #0003 执行内联方法#3，参数v1,v0，其中参数v1为”this”的实例，v0是方法的参数。</td>
</tr>
<tr>
<td>EF</td>
<td>unused_EF</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>F0</td>
<td>invoke-direct-empty</td>
<td>用于空方法的占位符，如Object.<init>。这相当于正常执行了nop指令注6。</td>
<td>F010 F608 0000 - invoke-direct-empty {v0}, Ljava&#x2F;lang&#x2F;Object;.<init>:()V &#x2F;&#x2F; method@08f6 替代空方法java&#x2F;lang&#x2F;Object;<init>。</td>
</tr>
<tr>
<td>F1</td>
<td>unused_F1</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>F2</td>
<td>iget-quick vx, vy, 偏移量</td>
<td>获取vy寄存器中实例指向+偏移位置的数据区的值，存入vx注6。</td>
<td>F221 1000 - iget-quick v1, v2, [obj+0010] 获取v2寄存器中的实例指向+10H位置的数据区的值，存入v1。</td>
</tr>
<tr>
<td>F3</td>
<td>iget-wide-quick vx, vy, 偏移量</td>
<td>获取vy寄存器中实例指向+偏移位置的数据区的值，存入vx,vx+1注6。</td>
<td>F364 3001 – iget-wide-quick v4, v6, [obj+0130] 获取v6寄存器中的实例指向+130H位置的数据区的值，存入v4,v5。</td>
</tr>
<tr>
<td>F4</td>
<td>iget-object-quick vx, vy, 偏移量</td>
<td>获取vy寄存器中实例指向+偏移位置的数据区的对象引用，存入vx注6。</td>
<td>F431 0C00 – iget-object-quick v1, v3, [obj+000c] 获取v3寄存器中的实例指向+0CH位置的数据区的对象引用，存入v1。</td>
</tr>
<tr>
<td>F5</td>
<td>iput-quick vx, vy, 偏移量</td>
<td>将vx寄存器中的值存入vy寄存器中的实例指向+偏移位置的数据区注6。</td>
<td>F521 1000 – iput-quick v1, v2, [obj+0010] 将v1寄存器中的值存入v2寄存器中的实例指向+10H位置的数据区。</td>
</tr>
<tr>
<td>F6</td>
<td>iput-wide-quick vx, vy, 偏移量</td>
<td>将vx,vx+1寄存器中的值存入vy寄存器中的实例指向+偏移位置的数据区注6。</td>
<td>F652 7001 – iput-wide-quick v2, v5, [obj+0170] 将v2,v3寄存器中的值存入v5寄存器中的实例指向+170H位置的数据区。</td>
</tr>
<tr>
<td>F7</td>
<td>iput-object-quick vx, vy, 偏移量</td>
<td>将vx寄存器中的对象引用存入vy寄存器中的实例指向+偏移位置的数据区注6。</td>
<td>F701 4C00 – iput-object-quick v1, v0, [obj+004c] 将v1寄存器中的对象引用存入v0寄存器中的实例指向+4CH位置的数据区。</td>
</tr>
<tr>
<td>F8</td>
<td>invoke-virtual-quick {参数}, 虚拟表偏移量</td>
<td>调用虚拟方法，使用目标对象虚拟表注6。</td>
<td>F820 B800 CF00 – invoke-virtual-quick {v15, v12}, vtable #00b8 调用虚拟方法，目标对象的实例指向位于v15寄存器，方法位于虚拟表#B8条目，方法所需的参数位于v12。</td>
</tr>
<tr>
<td>F9</td>
<td>invoke-virtual-quick&#x2F;range {参数范围}, 虚拟表偏移量</td>
<td>调用虚拟方法，使用目标对象虚拟表注6。</td>
<td>F906 1800 0000 – invoke-virtual-quick&#x2F;range {v0..v5},vtable #0018 调用虚拟方法，目标对象的实例指向位于v0寄存器，方法位于虚拟表#18H条目，方法所需的参数位于v1..v5。</td>
</tr>
<tr>
<td>FA</td>
<td>invoke-super-quick {参数}, 虚拟表偏移量</td>
<td>调用父类虚拟方法，使用目标对象的直接父类的虚拟表注6。</td>
<td>FA40 8100 3254 – invoke-super-quick {v2, v3, v4, v5}, vtable #0081 调用父类虚拟方法，目标对象的实例指向位于v2寄存器，方法位于虚拟表#81H条目，方法所需的参数位于v3,v4,v5。</td>
</tr>
<tr>
<td>FB</td>
<td>invoke-super-quick&#x2F;range {参数范围}, 虚拟表偏移量</td>
<td>调用父类虚拟方法，使用目标对象的直接父类的虚拟表注6。</td>
<td>F906 1B00 0000 – invoke-super-quick&#x2F;range {v0..v5}, vtable #001b 调用父类虚拟方法，目标对象的实例指向位于v0寄存器，方法位于虚拟表#1B条目，方法所需的参数位于v1..v5。</td>
</tr>
<tr>
<td>FC</td>
<td>unused_FC</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>FD</td>
<td>unused_FD</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>FE</td>
<td>unused_FE</td>
<td>未使用</td>
<td></td>
</tr>
<tr>
<td>FF</td>
<td>unused_FF</td>
<td>未使用</td>
<td></td>
</tr>
</tbody></table>
<p>注1：  Double和long值占用两个寄存器。（例：在vy地址上的值位于vy,vy+1寄存器）</p>
<p>注2：  偏移量可以是正或负，从指令起始字节起计算偏移量。偏移量在（2字节每1偏移量递增&#x2F;递减）时解释执行。负偏移量用二进制补码格式存储。偏移量当前位置是指令起始字节。</p>
<p>注3：  比较操作，如果第一个操作数大于第二个操作数返回正值；如果两者相等，返回0；如果第一个操作数小于第二个操作数，返回负值。</p>
<p>注4：  正常使用没见到过的，从<a target="_blank" rel="noopener" href="http://code.google.com/android/reference/dalvik/bytecode/Opcodes.html">Android opcode constant list</a>引入。</p>
<p>注5：  调用参数表的编译比较诡异。如果参数的数量大于4并且%4&#x3D;1，第5（第9或其他%4&#x3D;1的）个参数将编译在指令字节的下一个字节的4个最低位。奇怪的是，有一种情况不使用这种编译：方法有4个参数但用于编译单一参数，指令字节的下一个字节的4个最低位空置，将会编译为40而不是04。</p>
<p>注6：  这是一个不安全的指令，仅适用于ODEX文件。</p>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ul>
<li><p>一定要使用混淆。不单单是第三方SDK，你的代码也是。破解游戏很重要一点就是要抓住游戏的逻辑。代码混淆后，Smali更加晦涩难懂，逻辑也更难掌握。</p>
</li>
<li><p>回到开头的话，解读汇编比解读Smali难度大的多得多。所以重要的逻辑可以放到C&#x2F;C++层去处理就不要放在Java层上去处理。</p>
</li>
<li><p>多用连续调用的方式。这样出来的效果是Java只有一行，Smali可能有好几十行，看着都蛋疼。当然这对熟练的破解老手无效～</p>
</li>
<li><p>在一些关键的点上，比如支付，多绕一下。而不是像《消灭小星星》这样，直接在Java内用中文显示“支付成功”，同时去调用JNI方法。用dex2jar看一眼就暴露了。</p>
</li>
<li><p><code>java</code> 转 <code>smali</code> 的快捷方式，在 <code>IDEA</code> 或者 <code>Android Studo</code> 中安装插件 <code>java2smali</code>，在 <code>Build</code> 菜单栏下会出现 <code>Compile to smali</code>选项，可以迅速将 java 代码转化成 smali 代码。在学习 smali 的过程中，碰到不确定的内容，可以先写好 java 代码，再转成 smali 代码进行对照学习。</p>
</li>
<li><p>Android 官网也对 Dalvik 字节码的指令集进行了归纳，地址是 [Dalvik 字节码格式](<a target="_blank" rel="noopener" href="https://source.android.google.cn/docs/core/runtime/dalvik-bytecode?hl=zh-cn">Dalvik 字节码格式  | Android Open Source Project</a>)。在阅读过程中遇到不熟悉的指令，都可以在这个页面进行查找。</p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://tangxtang1119.github.io/2025/04/17/Samli/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2025/04/26/CTF/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            CTF理论
          
        </div>
      </a>
    
    
      <a href="/2025/04/17/%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">安卓逆向</div>
      </a>
    
  </nav>

   
 
   
  
   
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2025
        <i class="ri-heart-fill heart_icon"></i> 唐小唐
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/yuhangyuan.ico" alt="tangxtang"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i></p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=2658106011&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>